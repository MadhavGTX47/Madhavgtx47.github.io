<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>B1/B2 Visa Interview Preparation Workbook</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        

        

        

        
   
        
        /* Magic Sparkle Effect */
        .magic-sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #FFD700;
            border-radius: 100%;
            animation: sparkle 2s infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: transparent;
            color: #8B4513;
            min-height: 100vh;
            position: relative;
        }
        
        /* Background */
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
            background: radial-gradient(ellipse at bottom, #dd8f1b 0%, #090A0F 100%);
            overflow: hidden;
        }
        
        /* Sand-like particles */
        .sand-particle {
            position: fixed;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
            animation: float-sand 12s linear infinite;
        }
        
        @keyframes float-sand {
            0% {
                transform: translateX(-50px) translateY(100vh);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateX(calc(100vw + 50px)) translateY(-50px);
                opacity: 0;
            }
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.15) 0%, transparent 50%);
            pointer-events: none;
            z-index: -2;
        }
        
        .main-container {
            background: rgba(153, 102, 26, 0.116);
            backdrop-filter: blur(5px);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.1);
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
          
            color: #ffffff52 !important;
            -webkit-text-fill-color: #f0f0f0 !important;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%) !important;
            -webkit-background-clip: text !important;
            background-clip: text !important;
            text-align: center;
            font-size: 3em;
            margin-bottom: 40px;
            position: relative;
            background-clip: text;
            font-weight: 800;
            text-shadow: 0 4px 8px rgba(0,0,0,0.1);
            animation: titleGlow 3s ease-in-out infinite;
        }
        
        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.1); }
        }
        
        .title-container {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .title-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .title-subtitle {
            text-align: center;
            color: #666;
            font-size: 1.1em;
            margin-top: 10px;
            font-style: italic;
        }
        
        .floating-icons {
            position: absolute;
            font-size: 2em;
            animation: float 6s ease-in-out infinite;
            opacity: 0.7;
        }
        
        .floating-icons:nth-child(1) { top: 10px; left: 20px; animation-delay: 0s; }
        .floating-icons:nth-child(2) { top: 20px; right: 30px; animation-delay: 1s; }
        .floating-icons:nth-child(3) { bottom: 15px; left: 40px; animation-delay: 2s; }
        .floating-icons:nth-child(4) { bottom: 25px; right: 20px; animation-delay: 3s; }
        
        h2 {
            color: #34495e;
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-top: 40px;
            font-size: 1.4em;
            position: relative;
            overflow: hidden;
        }
        
        h2::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        h3 {
            color: #8B4513;
            margin-top: 25px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Times New Roman', serif;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(139, 69, 19, 0.3);
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
        }
        
        h3::before {
            content: '📜';
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .question-box {
            background: 
                linear-gradient(145deg, #f4f1e8 0%, #e8dcc0 50%, #d4c4a8 100%),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="parchment" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect width="20" height="20" fill="%23f4f1e8"/><circle cx="5" cy="5" r="1" fill="%23d4c4a8" opacity="0.3"/><circle cx="15" cy="15" r="1" fill="%23d4c4a8" opacity="0.3"/><circle cx="25" cy="5" r="1" fill="%23d4c4a8" opacity="0.3"/><circle cx="35" cy="15" r="1" fill="%23d4c4a8" opacity="0.3"/></pattern></defs><rect width="100" height="100" fill="url(%23parchment)"/></svg>');
            border: 3px solid #8B4513;
            border-radius: 0 20px 20px 0;
            padding: 30px;
            margin: 25px 0;
            box-shadow: 
                0 8px 25px rgba(139, 69, 19, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                inset 0 -1px 0 rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            transform: rotate(-1deg);
            color: #2c3e50;
        }
        
        .question-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, #DAA520 0%, #FFD700 50%, #DAA520 100%);
            border-radius: 0 20px 0 0;
        }
        
        .question-box::after {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            width: 8px;
            height: 8px;
            background: #8B4513;
            border-radius: 50%;
            box-shadow: 
                0 0 0 2px rgba(139, 69, 19, 0.3),
                0 0 0 4px rgba(255, 255, 255, 0.2);
        }
        
        .speak-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #654321 0%, #8B4513 100%);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(101, 67, 33, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 110px;
        }
        
        .speak-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .speak-button:active {
            transform: scale(0.95);
        }
        
        .speak-button.playing {
            background: linear-gradient(135deg, #556B2F 0%, #6B8E23 100%);
            animation: pulse 1s infinite;
        }
        
        .record-button {
            position: absolute;
            top: 60px;
            right: 15px;
            background: linear-gradient(135deg, #A0522D 0%, #CD853F 100%);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(160, 82, 45, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 110px;
        }
        
        .record-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .record-button:active {
            transform: scale(0.95);
        }
        
        .record-button.recording {
            background: linear-gradient(135deg, #8B0000 0%, #B22222 100%);
            animation: pulse 1s infinite;
        }
        
        .record-button.playing {
            background: linear-gradient(135deg, #4B0082 0%, #8A2BE2 100%);
            animation: pulse 1s infinite;
        }
        
        .audio-player {
            margin: 10px 0;
            padding: 10px;
            background: linear-gradient(145deg, #f8f9ff 0%, #ffffff 100%);
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .audio-player audio {
            width: 100%;
            height: 40px;
        }
        
        .question-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        
        .question-box::before {
            content: "💭";
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5em;
            opacity: 0.3;
        }
        
        .answer-space {
            border: 2px dashed #8B4513;
            min-height: 100px;
            padding: 15px;
            margin: 15px 0;
            background: 
                linear-gradient(145deg, rgba(244, 241, 232, 0.9) 0%, rgba(232, 220, 192, 0.9) 100%),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><defs><pattern id="lines" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect width="20" height="20" fill="none" stroke="%238B4513" stroke-width="0.5" opacity="0.3"/></pattern></defs><rect width="50" height="50" fill="url(%23lines)"/></svg>');
            border-radius: 10px;
            transition: all 0.3s ease;
            position: relative;
            font-family: 'Times New Roman', serif;
            color: #2c3e50;
        }
        
        .answer-space:focus-within {
            border-color: #2980b9;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
            transform: scale(1.02);
        }
        
        .answer-space::before {
            content: "📜 Write your answer here...";
            position: absolute;
            top: 10px;
            left: 15px;
            color: #34495e;
            font-style: italic;
            pointer-events: none;
            font-family: 'Times New Roman', serif;
            opacity: 0.7;
        }
        
        .answer-space:focus-within::before,
        .answer-space:not(:empty)::before,
        .answer-space.has-content::before {
            display: none;
        }
        
        .tip-box {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border-left: 5px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
            position: relative;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .tip-box::before {
            content: "";
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            background: #28a745;
            color: white;
            width: 4px;
            height: 100%;
            border-radius: 2px;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
            position: relative;
        }
        
        .warning-box::before {
            content: "";
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            background: #ffc107;
            color: white;
            width: 4px;
            height: 100%;
            border-radius: 2px;
        }
        
        .checklist {
            background: linear-gradient(145deg, #e3f2fd 0%, #bbdefb 100%);
            border: 2px solid #2196f3;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            position: relative;
        }
        
        .checklist::before {
            position: absolute;
            top: -10px;
            left: 20px;
            background: #2196f3;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        .checklist input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
            accent-color: #2196f3;
        }
        
        .checklist input[type="checkbox"]:checked + label {
            text-decoration: line-through;
            color: #666;
        }
        

        
        .section-divider {
            border-top: 3px solid #3498db;
            margin: 50px 0 30px 0;
            position: relative;
        }
        
        .section-divider::after {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 0 20px;
            font-size: 1.5em;
        }
        
        .emoji-icon {
            font-size: 1.2em;
            margin-right: 8px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B4513 0%, #A0522D 100%);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .floating-emoji {
            position: fixed;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
            pointer-events: none;
            z-index: 1000;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .success-animation {
            animation: successPulse 0.6s ease-in-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .interactive-button {
            background: linear-gradient(135deg, #556B2F 0%, #6B8E23 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }
        
        .interactive-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .feature-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #2F4F2F 0%, #556B2F 100%);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9em;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .feature-toggle:hover {
            transform: scale(1.05);
        }
        
        .countdown-timer {
            background: linear-gradient(135deg, #B8860B 0%, #DAA520 100%);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(184, 134, 11, 0.3);
        }
        
        .countdown-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }
        
        .dark-mode {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ecf0f1;
        }
        
        .dark-mode .main-container {
            background: rgba(44, 62, 80, 0.95);
            color: #ecf0f1;
        }
        
        .dark-mode .title-container {
            background: linear-gradient(135deg, rgba(44, 62, 80, 0.95) 0%, rgba(52, 73, 94, 0.95) 100%) !important;
            border: 2px solid rgba(255, 255, 255, 0.2) !important;
        }
        
        .dark-mode .question-box {
            background: linear-gradient(145deg, #34495e 0%, #2c3e50 100%);
            border-color: #4a5568;
            color: #ecf0f1;
        }
        
        .dark-mode .answer-space {
            background: linear-gradient(145deg, #2d3748 0%, #1a202c 100%);
            border-color: #4a5568;
            color: #ecf0f1;
        }
        
        .dark-mode h1 {
            color: #ffffff !important;
            -webkit-text-fill-color: #ffffff !important;
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%) !important;
            -webkit-background-clip: text !important;
            background-clip: text !important;
        }
        
        .dark-mode h2 {
            color: #ffffff;
        }
        
        .dark-mode h3 {
            color: #87ceeb;
        }
        
        .dark-mode p {
            color: #ecf0f1;
        }
        
        .dark-mode strong {
            color: #ffffff;
        }
        
        .dark-mode em {
            color: #bdc3c7;
        }
        
        .dark-mode .tip-box {
            background: linear-gradient(135deg, #2d5016 0%, #1e3a0a 100%);
            color: #ecf0f1;
        }
        
        .dark-mode .warning-box {
            background: linear-gradient(135deg, #4a3c00 0%, #2d2400 100%);
            color: #ecf0f1;
        }
        
        .dark-mode .checklist {
            background: linear-gradient(145deg, #1e3a5f 0%, #0f2a4a 100%);
            color: #ecf0f1;
        }
        
        .dark-mode input[type="text"],
        .dark-mode input[type="number"],
        .dark-mode input[type="date"],
        .dark-mode textarea {
            background: #2d3748;
            border-color: #4a5568;
            color: #ecf0f1;
        }
        
        .dark-mode input[type="text"]::placeholder,
        .dark-mode input[type="number"]::placeholder,
        .dark-mode textarea::placeholder {
            color: #a0aec0;
        }
        
        .dark-mode label {
            color: #ffffff !important;
        }
        
        .dark-mode div[style*="background-color: #f8f9fa"] {
            background: linear-gradient(145deg, #2d3748 0%, #1a202c 100%) !important;
            color: #ecf0f1 !important;
        }
        
        .dark-mode div[style*="background-color: #e8f4fd"] {
            background: linear-gradient(145deg, #1e3a5f 0%, #0f2a4a 100%) !important;
            color: #ecf0f1 !important;
        }
        
        .dark-mode div[style*="background: linear-gradient(135deg, #e3f2fd"] {
            background: linear-gradient(145deg, #1e3a5f 0%, #0f2a4a 100%) !important;
            color: #ecf0f1 !important;
        }
        
        .dark-mode div[style*="background: linear-gradient(135deg, #fff3e0"] {
            background: linear-gradient(145deg, #4a3c00 0%, #2d2400 100%) !important;
            color: #ecf0f1 !important;
        }
        
        .dark-mode div[style*="background: linear-gradient(135deg, #e8f5e8"] {
            background: linear-gradient(145deg, #2d5016 0%, #1e3a0a 100%) !important;
            color: #ecf0f1 !important;
        }
        
        .dark-mode div[style*="background-color: #fff3e0"] {
            background: linear-gradient(145deg, #4a3c00 0%, #2d2400 100%) !important;
            color: #ffffff !important;
        }
        
        .dark-mode div[style*="border-left: 4px solid #ff9800"] {
            background: linear-gradient(145deg, #4a3c00 0%, #2d2400 100%) !important;
            color: #ffffff !important;
        }
        
        .dark-mode div[style*="background-color: #ffebee"] {
            background: linear-gradient(145deg, #4a1a1a 0%, #2d0f0f 100%) !important;
            color: #ffffff !important;
        }
        
        .dark-mode .title-subtitle {
            color: #bdc3c7;
        }
        
        .dark-mode .countdown-timer {
            background: linear-gradient(135deg, #654321 0%, #8B4513 100%);
            color: #ffffff;
        }
        
        .achievement-badge {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #2c3e50;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
            animation: achievementPulse 2s ease-in-out;
        }
        
        @keyframes achievementPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .xp-bar {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
        }
        
        .xp-progress {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700 0%, #ffed4e 100%);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        

        
        .typing-animation {
            border-right: 2px solid #3498db;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { border-color: transparent; }
            51%, 100% { border-color: #3498db; }
        }
        
        .floating-quote {
            position: fixed;
            background: linear-gradient(135deg, #8B0000 0%, #B22222 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(139, 0, 0, 0.3);
            z-index: 1000;
            animation: quoteFloat 4s ease-in-out;
        }
        
        @keyframes quoteFloat {
            0% { transform: translateY(100vh) scale(0.8); opacity: 0; }
            20% { transform: translateY(0) scale(1); opacity: 1; }
            80% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100vh) scale(0.8); opacity: 0; }
        }
        
                        .music-control {
                    position: fixed;
                    bottom: 20px;
                    left: 20px;
                    background: linear-gradient(135deg, #4B0082 0%, #8A2BE2 100%);
                    color: white;
                    border: none;
                    padding: 15px 20px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 1em;
                    font-weight: bold;
                    z-index: 1000;
                    transition: all 0.3s ease;
                    box-shadow: 0 5px 15px rgba(75, 0, 130, 0.3);
                }
                
                .music-control:hover {
                    transform: scale(1.05);
                    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                }
                
                .music-control.playing {
                    animation: musicPulse 2s ease-in-out infinite;
                }
                
                @keyframes musicPulse {
                    0%, 100% { box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3); }
                    50% { box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4), 0 0 20px rgba(139, 69, 19, 0.3); }
                }
        
        .music-player {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            max-width: 300px;
        }
        
        .music-player.show {
            display: block;
        }
        
        .music-player iframe {
            border-radius: 10px;
            width: 100%;
            height: 200px;
        }
        
        .hidden {
            display: none;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media print {
            body { font-size: 12px; }
            .question-box { page-break-inside: avoid; }
            .floating-emoji { display: none; }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 14px;
            }
            
            .main-container {
                padding: 15px;
                margin: 5px;
                border-radius: 15px;
            }
            
            h1 {
                font-size: 1.8em;
                margin-bottom: 20px;
            }
            
            h2 {
                font-size: 1.3em;
                padding: 12px 15px;
            }
            
            h3 {
                font-size: 1.1em;
            }
            
            .question-box {
                padding: 15px;
                margin: 15px 0;
            }
            
            .answer-space {
                min-height: 80px;
                padding: 12px;
            }
            
            .tip-box, .warning-box {
                padding: 12px;
                margin: 12px 0;
            }
            
            .checklist {
                padding: 15px;
            }
            
            .interactive-button {
                padding: 10px 20px;
                font-size: 0.9em;
                margin: 5px 2px;
                display: block;
                width: 100%;
                margin-bottom: 10px;
            }
            
            .feature-toggle {
                top: 10px;
                right: 10px;
                padding: 8px 12px;
                font-size: 0.8em;
            }
            
            .music-control {
                bottom: 10px;
                left: 10px;
                padding: 10px 15px;
                font-size: 0.9em;
            }
            
            .music-player {
                bottom: 60px;
                left: 10px;
                right: 10px;
                max-width: none;
                width: calc(100% - 20px);
            }
            
            .music-player iframe {
                height: 150px;
            }
            
            .floating-quote {
                font-size: 1em;
                padding: 12px 15px;
                max-width: 90%;
                left: 5% !important;
            }
            
            .achievement-badge {
                padding: 8px 15px;
                font-size: 0.9em;
                margin: 8px 0;
            }
            
            .xp-bar {
                padding: 12px;
                margin: 15px 0;
            }
            
            .xp-progress {
                height: 15px;
            }
            
            input[type="text"], input[type="number"], input[type="date"], textarea {
                width: 100%;
                padding: 10px;
                font-size: 14px;
            }
            
            .title-container {
                padding: 20px;
            }
            
            .title-subtitle {
                font-size: 1em;
            }
            
            .floating-icons {
                font-size: 1.5em;
            }
            
            .section-divider {
                margin: 30px 0 20px 0;
            }
            

            
            .countdown-timer {
                padding: 12px;
                margin: 15px 0;
            }
            
            .countdown-number {
                font-size: 1.5em;
            }
            
            .speak-button {
                top: 10px;
                right: 10px;
                padding: 8px 12px;
                font-size: 0.8em;
                min-height: 36px;
                min-width: 90px;
                gap: 6px;
            }
            
            .record-button {
                top: 65px;
                right: 10px;
                padding: 8px 12px;
                font-size: 0.8em;
                min-height: 36px;
                min-width: 90px;
                gap: 6px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 5px;
                font-size: 13px;
            }
            
            .main-container {
                padding: 10px;
                margin: 2px;
            }
            
            h1 {
                font-size: 1.5em;
            }
            
            h2 {
                font-size: 1.2em;
                padding: 10px 12px;
            }
            
            .question-box {
                padding: 12px;
                margin: 10px 0;
            }
            
            .answer-space {
                min-height: 70px;
                padding: 10px;
            }
            
            .interactive-button {
                padding: 8px 15px;
                font-size: 0.85em;
            }
            
            .feature-toggle {
                font-size: 0.75em;
                padding: 6px 10px;
            }
            
            .music-control {
                font-size: 0.8em;
                padding: 8px 12px;
            }
            
            .floating-quote {
                font-size: 0.9em;
                padding: 10px 12px;
            }
            
            .achievement-badge {
                padding: 6px 12px;
                font-size: 0.85em;
            }
            
            .xp-bar {
                padding: 10px;
            }
            
            .xp-progress {
                height: 12px;
            }
            
            input[type="text"], input[type="number"], input[type="date"], textarea {
                padding: 8px;
                font-size: 13px;
            }
            
            .title-container {
                padding: 15px;
            }
            
            .title-subtitle {
                font-size: 0.9em;
            }
            
            .floating-icons {
                font-size: 1.2em;
            }
            

            
            .countdown-number {
                font-size: 1.3em;
            }
            
            .speak-button {
                top: 8px;
                right: 8px;
                padding: 6px 10px;
                font-size: 0.75em;
                min-height: 32px;
                min-width: 80px;
                gap: 5px;
            }
            
            .record-button {
                top: 60px;
                right: 8px;
                padding: 6px 10px;
                font-size: 0.75em;
                min-height: 32px;
                min-width: 80px;
                gap: 5px;
            }
            
            /* Touch-friendly improvements */
            .interactive-button, .feature-toggle, .music-control {
                min-height: 44px; /* Apple's recommended minimum touch target */
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Quiz mobile styles */
            .quiz-rating-btn {
                min-height: 44px !important;
                font-size: 0.8em !important;
                padding: 8px 12px !important;
                margin: 5px !important;
                flex: 1;
                max-width: 80px;
            }
            
            #quiz-container {
                overflow: hidden;
            }
            
            #quiz-question {
                word-wrap: break-word;
                hyphens: auto;
            }
            
            /* Quiz button animations */
            .quiz-rating-btn:hover {
                transform: scale(1.05) !important;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3) !important;
                transition: all 0.2s ease !important;
            }
            
            #quiz-ready-btn:hover {
                transform: scale(1.05);
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            }
            
            #quiz-record-btn:hover {
                transform: scale(1.05);
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            }
            
            /* Quiz timer pulse animation */
            @keyframes timerPulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.1); }
            }
            
            #timer-display {
                animation: timerPulse 1s ease-in-out infinite;
            }
            
            .answer-space {
                -webkit-tap-highlight-color: transparent;
                -webkit-touch-callout: none;
                -webkit-user-select: text;
                user-select: text;
            }
            
            input[type="checkbox"] {
                min-width: 20px;
                min-height: 20px;
            }
            
            /* Prevent zoom on input focus */
            input[type="text"], input[type="number"], input[type="date"], textarea {
                font-size: 16px !important;
            }
        }
    </style>
    <script>
        // Interactive functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Progress tracking
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const progressBar = document.querySelector('.progress-fill');
            
            function updateProgress() {
                const total = checkboxes.length;
                const checked = document.querySelectorAll('input[type="checkbox"]:checked').length;
                const percentage = (checked / total) * 100;
                progressBar.style.width = percentage + '%';
                
                if (percentage === 100) {
                    showSuccessMessage();
                }
            }
            
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updateProgress();
                    if (this.checked) {
                        this.parentElement.classList.add('success-animation');
                        setTimeout(() => {
                            this.parentElement.classList.remove('success-animation');
                        }, 600);
                    }
                    // Check achievements immediately when checkbox is checked
                    setTimeout(checkAchievements, 100);
                });
            });
            
            // Make answer spaces interactive
            const answerSpaces = document.querySelectorAll('.answer-space');
            answerSpaces.forEach(space => {
                space.contentEditable = true;
                
                space.addEventListener('focus', function() {
                    this.style.borderColor = '#2980b9';
                    this.style.boxShadow = '0 0 0 3px rgba(52, 152, 219, 0.1)';
                });
                
                space.addEventListener('blur', function() {
                    this.style.borderColor = '#3498db';
                    this.style.boxShadow = 'none';
                });
                
                space.addEventListener('input', function() {
                    // Hide placeholder when user starts typing
                    if (this.textContent.trim() !== '') {
                        this.classList.add('has-content');
                    } else {
                        this.classList.remove('has-content');
                    }
                    // Check achievements immediately when content is added
                    setTimeout(checkAchievements, 100);
                });
                
                space.addEventListener('keydown', function(e) {
                    // Hide placeholder immediately when user starts typing
                    if (e.key.length === 1 || e.key === 'Backspace' || e.key === 'Delete') {
                        this.classList.add('has-content');
                    }
                });
            });
            
            // Floating emojis
            function createFloatingEmoji() {
                const emojis = ['✈️', '🇺🇸', '🎯', '💪', '🌟', '📝', '💡'];
                const emoji = document.createElement('div');
                emoji.className = 'floating-emoji';
                emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                emoji.style.left = Math.random() * window.innerWidth + 'px';
                emoji.style.top = window.innerHeight + 'px';
                document.body.appendChild(emoji);
                
                setTimeout(() => {
                    emoji.remove();
                }, 3000);
            }
            
            setInterval(createFloatingEmoji, 5000);
            
            // Success message
            function showSuccessMessage() {
                const message = document.createElement('div');
                message.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(135deg, #28a745, #20c997);
                    color: white;
                    padding: 30px;
                    border-radius: 15px;
                    font-size: 1.2em;
                    font-weight: bold;
                    z-index: 10000;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    animation: fadeIn 0.5s ease-in;
                `;
                message.innerHTML = '🎉 Congratulations! You\'ve completed all tasks! 🎉';
                document.body.appendChild(message);
                
                setTimeout(() => {
                    message.remove();
                }, 3000);
            }
            
            // Add save functionality
            function saveProgress() {
                const data = {};
                checkboxes.forEach((checkbox, index) => {
                    data[`checkbox_${index}`] = checkbox.checked;
                });
                
                answerSpaces.forEach((space, index) => {
                    data[`answer_${index}`] = space.textContent;
                });
                
                localStorage.setItem('visaPrepProgress', JSON.stringify(data));
                
                // Show save confirmation
                const saveMsg = document.createElement('div');
                saveMsg.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background: #28a745;
                    color: white;
                    padding: 10px 20px;
                    border-radius: 25px;
                    font-size: 0.9em;
                    z-index: 1000;
                    animation: fadeIn 0.3s ease-in;
                `;
                saveMsg.textContent = '💾 Progress saved!';
                document.body.appendChild(saveMsg);
                
                setTimeout(() => {
                    saveMsg.remove();
                }, 2000);
            }
            
            // Load saved progress
            function loadProgress() {
                const saved = localStorage.getItem('visaPrepProgress');
                if (saved) {
                    const data = JSON.parse(saved);
                    
                    Object.keys(data).forEach(key => {
                        if (key.startsWith('checkbox_')) {
                            const index = parseInt(key.split('_')[1]);
                            if (checkboxes[index]) {
                                checkboxes[index].checked = data[key];
                            }
                        } else if (key.startsWith('answer_')) {
                            const index = parseInt(key.split('_')[1]);
                            if (answerSpaces[index]) {
                                answerSpaces[index].textContent = data[key];
                            }
                        }
                    });
                    
                    updateProgress();
                }
            }
            
            // Auto-save every 30 seconds
            setInterval(saveProgress, 30000);
            
            // Load progress on page load
            loadProgress();
            
            // Add save button
            const saveButton = document.createElement('button');
            saveButton.className = 'interactive-button';
            saveButton.textContent = '💾 Save Progress';
            saveButton.onclick = saveProgress;
            document.querySelector('.title-container').after(saveButton);
            
            // Add print button
            const printButton = document.createElement('button');
            printButton.className = 'interactive-button';
            printButton.textContent = '🖨️ Print Workbook';
            printButton.onclick = () => window.print();
            saveButton.after(printButton);
            
            // Add reset button
            const resetButton = document.createElement('button');
            resetButton.className = 'interactive-button';
            resetButton.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
            resetButton.textContent = '🔄 Reset All Progress';
            resetButton.onclick = resetAllProgress;
            printButton.after(resetButton);
            

            
            // Add dark mode toggle
            const darkModeToggle = document.createElement('button');
            darkModeToggle.className = 'feature-toggle';
            darkModeToggle.textContent = '🌙 Dark Mode';
            darkModeToggle.onclick = toggleDarkMode;
            document.body.appendChild(darkModeToggle);
            
            // Add countdown timer
            const countdownTimer = document.createElement('div');
            countdownTimer.className = 'countdown-timer';
            countdownTimer.innerHTML = `
                <div class="countdown-number" id="countdown">00:00:00</div>
                <div>Time until your interview</div>
            `;
            document.querySelector('.title-container').after(countdownTimer);
            
            // Add achievement system
            let achievements = JSON.parse(localStorage.getItem('visaAchievements') || '[]');
            
            function showAchievement(title, message) {
                const badge = document.createElement('div');
                badge.className = 'achievement-badge';
                badge.innerHTML = `<strong>🏆 ${title}</strong><br>${message}`;
                document.body.appendChild(badge);
                
                setTimeout(() => {
                    badge.remove();
                }, 4000);
            }
            
            function toggleDarkMode() {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                darkModeToggle.textContent = isDark ? '☀️ Light Mode' : '🌙 Dark Mode';
                localStorage.setItem('darkMode', isDark);
            }
            
            function updateCountdown() {
                // Set interview date to July 23rd, 2025 at 8:00 AM
                const interviewDate = new Date('2025-07-23T08:00:00');
                
                const now = new Date();
                const diff = interviewDate - now;
                
                if (diff > 0) {
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                    
                    document.getElementById('countdown').textContent = 
                        `${days.toString().padStart(2, '0')}:${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                } else {
                    document.getElementById('countdown').textContent = "00:00:00:00";
                    document.querySelector('.countdown-timer').innerHTML = `
                        <div class="countdown-number">🎯 Interview Day!</div>
                        <div>Good luck with your visa interview!</div>
                    `;
                }
            }
            
            // Load dark mode preference
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
                darkModeToggle.textContent = '☀️ Light Mode';
            }
            
            // Start countdown timer
            updateCountdown();
            setInterval(updateCountdown, 1000); // Update every second
            
            // Check achievements periodically
            setInterval(checkAchievements, 5000);
            
            // Check achievements on page load
            checkAchievements();
            
            // XP System with Titles
            let currentXP = parseInt(localStorage.getItem('visaXP') || '0');
            let currentLevel = parseInt(localStorage.getItem('visaLevel') || '1');
            let nextLevelXP = currentLevel * 100;
            
            const titles = [
                "🎮 Novice Adventurer",
                "🌟 Apprentice Hero", 
                "🗡️ Dedicated Warrior",
                "🛡️ Confident Champion",
                "⚔️ Skilled Legend",
                "🏆 Visa Expert Dragon",
                "⚡ Interview Master",
                "🌟 Grand Master",
                "🔥 Legendary Preparer",
                "🏆 Ultimate Visa Champion"
            ];
            
            function getCurrentTitle() {
                if (currentLevel >= 10) return "🏆 Visa Master Dragon";
                if (currentLevel >= 8) return "⚔️ Interview Legend";
                if (currentLevel >= 6) return "🛡️ Preparation Champion";
                if (currentLevel >= 4) return "🗡️ Study Warrior";
                if (currentLevel >= 2) return "🌟 Learning Hero";
                return "🎮 Novice Adventurer";
            }
            
            function updateXPDisplay() {
                document.getElementById('current-xp').textContent = currentXP;
                document.getElementById('current-level').textContent = getCurrentTitle();
                document.getElementById('next-level-xp').textContent = nextLevelXP;
                
                const xpPercentage = (currentXP / nextLevelXP) * 100;
                document.getElementById('xp-fill').style.width = xpPercentage + '%';
            }
            
            function addXP(amount) {
                currentXP += amount;
                localStorage.setItem('visaXP', currentXP.toString());
                
                if (currentXP >= nextLevelXP) {
                    levelUp();
                }
                
                updateXPDisplay();
            }
            
            function levelUp() {
                currentLevel++;
                currentXP -= nextLevelXP;
                nextLevelXP = currentLevel * 100;
                
                localStorage.setItem('visaLevel', currentLevel.toString());
                localStorage.setItem('visaXP', currentXP.toString());
                
                            // Show level up message with new title
            const levelUpMsg = document.getElementById('level-up-message');
            levelUpMsg.innerHTML = `⚔️ LEVEL UP! You are now: <strong>${getCurrentTitle()}</strong> ⚔️`;
            levelUpMsg.style.display = 'block';
            setTimeout(() => {
                levelUpMsg.style.display = 'none';
            }, 4000);
                
                // Play level up sound
                playSound('levelup');
            }
            

            
            // Typing Animation
            function addTypingAnimation(element) {
                element.classList.add('typing-animation');
                setTimeout(() => {
                    element.classList.remove('typing-animation');
                }, 1000);
            }
            
            // Floating Quotes
            const motivationalQuotes = [
                "⚔️ You've got this! Your quest for the visa continues!",
                "🎮 Every answer brings you closer to defeating the interview boss!",
                "🌟 Your preparation will pay off in the final battle!",
                "🚀 You're leveling up your interview skills!",
                "💎 Stay focused, brave adventurer!",
                "🎊 Every step forward is a victory in your quest!",
                "⭐ You're building your character for the ultimate challenge!",
                "🔥 Your dedication is inspiring, hero!",
                "🌈 Success is within your reach, champion!",
                "🏆 You're becoming a visa master!",
                "🗡️ Keep fighting, brave warrior!",
                "🛡️ Your shield of preparation is strong!",
                "⚡ Your lightning-fast responses will win the day!",
                "🎯 Your aim is true, archer of answers!",
                "🏰 The castle of success awaits your arrival!"
            ];
            
            function showRandomQuote() {
                const quote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
                const quoteElement = document.createElement('div');
                quoteElement.className = 'floating-quote';
                quoteElement.textContent = quote;
                quoteElement.style.left = Math.random() * (window.innerWidth - 300) + 'px';
                document.body.appendChild(quoteElement);
                
                setTimeout(() => {
                    quoteElement.remove();
                }, 4000);
            }
            
            // Background Music
            let isMusicPlaying = false;
            let musicPlayer = null;
            
            let isAutoMusicEnabled = localStorage.getItem('autoMusicEnabled') !== 'false';
            let currentMusicTrack = 0;
            
            // Epic RPG background music playlist
            const musicPlaylist = [
                'kup39UuYUCM', // Dragon Quest - Peaceful music
                'HMnrl0tmd3k', // Peaceful Piano
                '5qap5aO4i9A', // Lofi Study Music
                'jfKfPfyJRdk', // Relaxing Music
                'lFcSrYw-ARY', // Ambient Study Music
                'dQw4w9WgXcQ', // Never Gonna Give You Up (for fun)

            ];
            
            function createMusicControl() {
                const musicBtn = document.createElement('button');
                musicBtn.className = 'music-control';
                musicBtn.innerHTML = isAutoMusicEnabled ? '🔇 Stop Music' : '🎵 Start Music';
                musicBtn.title = isAutoMusicEnabled ? 'Stop Background Music | Double-click for controls' : 'Start Background Music';
                musicBtn.onclick = toggleBackgroundMusic;
                
                // Add playing class if auto-enabled
                if (isAutoMusicEnabled) {
                    musicBtn.classList.add('playing');
                }
                
                // Add double-click to open player
                musicBtn.ondblclick = function() {
                    if (isAutoMusicEnabled) {
                        toggleMusicPlayer();
                    }
                };
                
                document.body.appendChild(musicBtn);
                
                // Create music player (hidden by default)
                musicPlayer = document.createElement('div');
                musicPlayer.className = 'music-player';
                musicPlayer.innerHTML = `
                    <h4 style="margin: 0 0 15px 0; color: #333;">🎵 Epic Quest Music</h4>
                    <div style="margin-bottom: 10px;">
                        <label style="font-size: 0.9em; color: #666;">Volume: </label>
                        <input type="range" id="volumeSlider" min="0" max="100" value="15" style="width: 150px; margin: 0 10px;">
                        <span id="volumeDisplay" style="font-size: 0.9em; color: #666;">15%</span>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <button onclick="previousTrack()" style="background: #8B4513; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-right: 5px;">⏮️ Previous</button>
                        <button onclick="nextTrack()" style="background: #8B4513; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">⏭️ Next</button>
                    </div>
                    <div id="ytPlayer" style="width: 100%; height: 200px; border-radius: 10px; overflow: hidden;"></div>
                    <div style="margin-top: 15px; text-align: center;">
                        <button onclick="closeMusicPlayer()" style="background: #8B4513; color: white; border: none; padding: 8px 15px; border-radius: 10px; cursor: pointer;">
                            Close Player
                        </button>
                    </div>
                `;
                document.body.appendChild(musicPlayer);
                
                // Load YouTube IFrame API if not already loaded
                if (!window.YT) {
                    const script = document.createElement('script');
                    script.src = 'https://www.youtube.com/iframe_api';
                    document.head.appendChild(script);
                }
                
                // Initialize YouTube player
                window.initializeYouTubePlayer = function() {
                    if (window.YT && window.YT.Player) {
                        // Destroy existing player if it exists
                        if (window.ytMusicPlayer && typeof window.ytMusicPlayer.destroy === 'function') {
                            window.ytMusicPlayer.destroy();
                        }
                        
                        window.ytMusicPlayer = new YT.Player('ytPlayer', {
                            height: '200',
                            width: '100%',
                            videoId: musicPlaylist[currentMusicTrack],
                            playerVars: {
                                autoplay: 0, // Start with autoplay off to avoid browser blocking
                                controls: 1,
                                rel: 0,
                                modestbranding: 1,
                                showinfo: 0,
                                loop: 1,
                                playlist: musicPlaylist.join(',')
                            },
                            events: {
                                onReady: function(event) {
                                    // Set initial volume to 15%
                                    event.target.setVolume(15);
                                    
                                    // Check if user has interacted with page (required for autoplay)
                                    let userHasInteracted = false;
                                    const interactionEvents = ['click', 'touchstart', 'keydown', 'scroll'];
                                    
                                    interactionEvents.forEach(eventType => {
                                        document.addEventListener(eventType, function() {
                                            userHasInteracted = true;
                                        }, { once: true });
                                    });
                                    
                                    // Auto-play if enabled and user has interacted
                                    if (isAutoMusicEnabled) {
                                        setTimeout(() => {
                                            if (userHasInteracted) {
                                                try {
                                                    event.target.playVideo();
                                                    showMusicNotification();
                                                } catch (e) {
                                                    console.log('Auto-play failed:', e);
                                                    showAutoplayPrompt();
                                                }
                                            } else {
                                                // Wait for user interaction
                                                const checkInteraction = setInterval(() => {
                                                    if (userHasInteracted) {
                                                        clearInterval(checkInteraction);
                                                        try {
                                                            event.target.playVideo();
                                                            showMusicNotification();
                                                        } catch (e) {
                                                            console.log('Auto-play failed:', e);
                                                            showAutoplayPrompt();
                                                        }
                                                    }
                                                }, 1000);
                                                
                                                // Timeout after 30 seconds
                                                setTimeout(() => {
                                                    clearInterval(checkInteraction);
                                                    if (!userHasInteracted) {
                                                        showAutoplayPrompt();
                                                    }
                                                }, 30000);
                                            }
                                        }, 2000);
                                    }
                                    
                                    // Set up volume slider
                                    const volumeSlider = document.getElementById('volumeSlider');
                                    const volumeDisplay = document.getElementById('volumeDisplay');
                                    
                                    if (volumeSlider && volumeDisplay && !volumeSlider.hasAttribute('data-listener-added')) {
                                        volumeSlider.setAttribute('data-listener-added', 'true');
                                        volumeSlider.addEventListener('input', function() {
                                            const volume = this.value;
                                            volumeDisplay.textContent = volume + '%';
                                            if (window.ytMusicPlayer && typeof window.ytMusicPlayer.setVolume === 'function') {
                                                window.ytMusicPlayer.setVolume(parseInt(volume));
                                            }
                                        });
                                    }
                                },
                                onStateChange: function(event) {
                                    // Auto-play next track when current one ends
                                    if (event.data === YT.PlayerState.ENDED) {
                                        nextTrack();
                                    }
                                }
                            }
                        });
                    }
                };
                
                // Initialize player when API is ready
                if (window.YT && window.YT.Player) {
                    window.initializeYouTubePlayer();
                } else {
                    window.onYouTubeIframeAPIReady = window.initializeYouTubePlayer;
                }
            }
            
            function showMusicNotification() {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: linear-gradient(135deg, #8B4513, #A0522D);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 15px;
                    font-size: 1em;
                    font-weight: bold;
                    z-index: 10000;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                    animation: fadeIn 0.5s ease-in;
                `;
                notification.innerHTML = '🎵 Epic quest music started! Double-click music button to open controls.';
                notification.style.cursor = 'pointer';
                notification.onclick = function() {
                    toggleMusicPlayer();
                    this.remove();
                };
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 4000);
            }
            
            function showAutoplayPrompt() {
                const prompt = document.createElement('div');
                prompt.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(135deg, #8B4513, #A0522D);
                    color: white;
                    padding: 25px;
                    border-radius: 20px;
                    font-size: 1.1em;
                    font-weight: bold;
                    z-index: 10001;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
                    text-align: center;
                    max-width: 400px;
                `;
                prompt.innerHTML = `
                    <h3 style="margin: 0 0 15px 0;">🎵 Enable Epic Quest Music?</h3>
                    <p style="margin: 0 0 20px 0; font-size: 0.9em;">Browser blocked automatic music. Click "Start Music" to enable epic RPG background music for your visa quest!</p>
                    <button onclick="startMusicWithInteraction()" style="background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 12px 25px; border-radius: 15px; font-size: 1em; cursor: pointer; margin: 0 10px;">
                        🎵 Start Epic Music Now
                    </button>
                    <button onclick="disableAutoMusic()" style="background: rgba(255,255,255,0.1); color: white; border: 2px solid rgba(255,255,255,0.5); padding: 12px 25px; border-radius: 15px; font-size: 1em; cursor: pointer; margin: 0 10px;">
                        Maybe Later
                    </button>
                `;
                
                document.body.appendChild(prompt);
                
                // Auto-remove after 10 seconds
                setTimeout(() => {
                    if (prompt.parentNode) {
                        prompt.remove();
                    }
                }, 10000);
            }
            
            window.startMusicWithInteraction = function() {
                // Remove prompt
                const prompt = document.querySelector('div[style*="z-index: 10001"]');
                if (prompt) prompt.remove();
                
                // Start music with user interaction
                if (window.ytMusicPlayer && typeof window.ytMusicPlayer.playVideo === 'function') {
                    try {
                        window.ytMusicPlayer.playVideo();
                        showMusicNotification();
                        
                        // Update button state
                        const btn = document.querySelector('.music-control');
                        if (btn) {
                            btn.innerHTML = '🔇 Stop Music';
                            btn.classList.add('playing');
                            btn.title = 'Stop Background Music | Double-click for controls';
                        }
                    } catch (e) {
                        console.log('Music start failed:', e);
                    }
                }
            };
            
            window.disableAutoMusic = function() {
                // Remove prompt
                const prompt = document.querySelector('div[style*="z-index: 10001"]');
                if (prompt) prompt.remove();
                
                // Disable auto-music
                isAutoMusicEnabled = false;
                localStorage.setItem('autoMusicEnabled', 'false');
                
                // Update button
                const btn = document.querySelector('.music-control');
                if (btn) {
                    btn.innerHTML = '🎵 Start Music';
                    btn.classList.remove('playing');
                    btn.title = 'Start Background Music';
                }
            };
            
            function toggleBackgroundMusic() {
                const btn = document.querySelector('.music-control');
                
                if (isAutoMusicEnabled) {
                    // Stop music
                    if (window.ytMusicPlayer && typeof window.ytMusicPlayer.pauseVideo === 'function') {
                        window.ytMusicPlayer.pauseVideo();
                    }
                    isAutoMusicEnabled = false;
                    btn.innerHTML = '🎵 Start Music';
                    btn.classList.remove('playing');
                    btn.title = 'Start Background Music';
                    localStorage.setItem('autoMusicEnabled', 'false');
                } else {
                    // Start music
                    if (window.ytMusicPlayer && typeof window.ytMusicPlayer.playVideo === 'function') {
                        window.ytMusicPlayer.playVideo();
                    }
                    isAutoMusicEnabled = true;
                    btn.innerHTML = '🔇 Stop Music';
                    btn.classList.add('playing');
                    btn.title = 'Stop Background Music | Double-click for controls';
                    localStorage.setItem('autoMusicEnabled', 'true');
                }
            }
            
            window.nextTrack = function() {
                currentMusicTrack = (currentMusicTrack + 1) % musicPlaylist.length;
                if (window.ytMusicPlayer && typeof window.ytMusicPlayer.loadVideoById === 'function') {
                    window.ytMusicPlayer.loadVideoById(musicPlaylist[currentMusicTrack]);
                }
            };
            
            window.previousTrack = function() {
                currentMusicTrack = (currentMusicTrack - 1 + musicPlaylist.length) % musicPlaylist.length;
                if (window.ytMusicPlayer && typeof window.ytMusicPlayer.loadVideoById === 'function') {
                    window.ytMusicPlayer.loadVideoById(musicPlaylist[currentMusicTrack]);
                }
            };
            
            function toggleMusicPlayer() {
                if (musicPlayer.classList.contains('show')) {
                    closeMusicPlayer();
                } else {
                    openMusicPlayer();
                }
            }
            
            function openMusicPlayer() {
                musicPlayer.classList.add('show');
            }
            
            function closeMusicPlayer() {
                musicPlayer.classList.remove('show');
            }
            
            // Make closeMusicPlayer global
            window.closeMusicPlayer = closeMusicPlayer;
            
            // Reset all progress function
            function resetAllProgress() {
                if (confirm('Are you sure you want to reset ALL progress? This will clear:\n• All filled answers\n• All checked boxes\n• All XP and achievements\n• All saved progress\n\nThis cannot be undone!')) {
                    // Clear localStorage
                    localStorage.removeItem('visaPrepProgress');
                    localStorage.removeItem('visaAchievements');
                    localStorage.removeItem('visaXP');
                    localStorage.removeItem('visaLevel');
                    localStorage.removeItem('darkMode');
                    localStorage.removeItem('visaRecordings'); // Clear saved recordings
                    localStorage.removeItem('quizResults'); // Clear quiz history
                    localStorage.removeItem('autoMusicEnabled'); // Reset music preferences
                    
                    // Reset XP and achievements
                    currentXP = 0;
                    currentLevel = 1;
                    nextLevelXP = 100;
                    achievements = [];
                    
                    // Clear all answer spaces
                    answerSpaces.forEach(space => {
                        space.textContent = '';
                        space.classList.remove('has-content');
                    });
                    
                    // Uncheck all checkboxes
                    checkboxes.forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    
                    // Remove all audio players
                    const audioPlayers = document.querySelectorAll('.audio-player');
                    audioPlayers.forEach(player => {
                        // Clean up audio URLs
                        const audio = player.querySelector('audio');
                        if (audio && audio.src) {
                            URL.revokeObjectURL(audio.src);
                        }
                        player.remove();
                    });
                    
                    // Update displays
                    updateXPDisplay();
                    updateProgress();
                    
                    // Show reset confirmation
                    const resetMsg = document.createElement('div');
                    resetMsg.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: linear-gradient(135deg, #e74c3c, #c0392b);
                        color: white;
                        padding: 30px;
                        border-radius: 15px;
                        font-size: 1.2em;
                        font-weight: bold;
                        z-index: 10000;
                        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                        animation: fadeIn 0.5s ease-in;
                        text-align: center;
                    `;
                    resetMsg.innerHTML = '🔄 All Progress Reset!<br><br>You can start fresh now!';
                    document.body.appendChild(resetMsg);
                    
                    setTimeout(() => {
                        resetMsg.remove();
                    }, 3000);
                    
                    // Reload page after a short delay
                    setTimeout(() => {
                        location.reload();
                    }, 3500);
                }
            }
            
            // Make resetAllProgress global
            window.resetAllProgress = resetAllProgress;
            
            function playSound(type) {
                // Simple sound effect using Web Audio API
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    if (type === 'levelup') {
                        oscillator.frequency.setValueAtTime(523, audioContext.currentTime); // C5
                        oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.1); // E5
                        oscillator.frequency.setValueAtTime(784, audioContext.currentTime + 0.2); // G5
                    }
                    
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                    
                    setTimeout(() => {
                        audioContext.close();
                    }, 1000);
                } catch (e) {
                    console.log('Sound not supported');
                }
            }
            
            // Enhanced achievement system with XP for filling boxes
            function checkAchievements() {
                const totalQuestions = document.querySelectorAll('.question-box').length;
                const filledBoxes = document.querySelectorAll('.answer-space.has-content').length;
                const totalBoxes = document.querySelectorAll('.answer-space').length;
                const checkedBoxes = document.querySelectorAll('input[type="checkbox"]:checked').length;
                
                // Achievement for first filled answer box
                if (filledBoxes > 0 && !achievements.includes('first_answer')) {
                    showAchievement('First Answer! 🎯', 'You wrote your first answer! +20 XP');
                    achievements.push('first_answer');
                    addXP(20);
                }
                
                // Achievement for first checkbox
                if (checkedBoxes > 0 && !achievements.includes('first_check')) {
                    showAchievement('Getting Organized! 📋', 'You checked your first item! +15 XP');
                    achievements.push('first_check');
                    addXP(15);
                }
                
                // Achievement for halfway through filling boxes
                if (filledBoxes >= Math.ceil(totalBoxes / 2) && !achievements.includes('halfway_answers')) {
                    showAchievement('Halfway Through! 🚀', 'You\'ve filled half the answer boxes! +50 XP');
                    achievements.push('halfway_answers');
                    addXP(50);
                }
                
                // Achievement for halfway through checkboxes
                if (checkedBoxes >= Math.ceil(document.querySelectorAll('input[type="checkbox"]').length / 2) && !achievements.includes('halfway_checks')) {
                    showAchievement('Halfway Organized! 📊', 'You\'ve checked half the items! +40 XP');
                    achievements.push('halfway_checks');
                    addXP(40);
                }
                
                // Achievement for almost all boxes filled
                if (filledBoxes >= Math.floor(totalBoxes * 0.8) && !achievements.includes('almost_complete_answers')) {
                    showAchievement('Almost Complete! 🎊', 'You\'ve filled almost all answer boxes! +75 XP');
                    achievements.push('almost_complete_answers');
                    addXP(75);
                }
                
                // Achievement for almost all checkboxes
                if (checkedBoxes >= Math.floor(document.querySelectorAll('input[type="checkbox"]').length * 0.8) && !achievements.includes('almost_complete_checks')) {
                    showAchievement('Almost Organized! 📋', 'You\'ve checked almost all items! +60 XP');
                    achievements.push('almost_complete_checks');
                    addXP(60);
                }
                
                // Ultimate achievement for filling ALL boxes
                if (filledBoxes >= totalBoxes && !achievements.includes('complete_answers')) {
                    showAchievement('Answer Master! 🏆', 'You\'ve filled ALL answer boxes! +150 XP');
                    achievements.push('complete_answers');
                    addXP(150);
                    showRandomQuote();
                }
                
                // Ultimate achievement for checking ALL boxes
                if (checkedBoxes >= document.querySelectorAll('input[type="checkbox"]').length && !achievements.includes('complete_checks')) {
                    showAchievement('Organization Master! 🏆', 'You\'ve checked ALL items! +100 XP');
                    achievements.push('complete_checks');
                    addXP(100);
                    showRandomQuote();
                }
                
                localStorage.setItem('visaAchievements', JSON.stringify(achievements));
            }
            
            // Add typing animation to answer spaces
            answerSpaces.forEach(space => {
                space.addEventListener('focus', function() {
                    addTypingAnimation(this);
                });
            });
            
            // Show random quotes periodically
            setInterval(() => {
                if (Math.random() < 0.1) { // 10% chance every interval
                    showRandomQuote();
                }
            }, 30000); // Every 30 seconds
            
            // Text-to-Speech functionality
            let currentSpeech = null;
            
            function speakText(text, button) {
                // Stop any current speech
                if (currentSpeech) {
                    speechSynthesis.cancel();
                    currentSpeech = null;
                }
                
                // Create new speech
                currentSpeech = new SpeechSynthesisUtterance(text);
                currentSpeech.rate = 0.9; // Slightly slower for clarity
                currentSpeech.pitch = 1.0;
                currentSpeech.volume = 0.8;
                
                // Try to use a female voice for better clarity
                const voices = speechSynthesis.getVoices();
                const femaleVoice = voices.find(voice => 
                    voice.lang.includes('en') && voice.name.includes('female')
                ) || voices.find(voice => voice.lang.includes('en'));
                
                if (femaleVoice) {
                    currentSpeech.voice = femaleVoice;
                }
                
                // Add visual feedback
                button.classList.add('playing');
                button.textContent = '🔊 Playing...';
                
                // Handle speech events
                currentSpeech.onend = function() {
                    button.classList.remove('playing');
                    button.textContent = '🔊 Speak';
                    currentSpeech = null;
                };
                
                currentSpeech.onerror = function() {
                    button.classList.remove('playing');
                    button.textContent = '🔊 Speak';
                    currentSpeech = null;
                };
                
                // Start speaking
                speechSynthesis.speak(currentSpeech);
            }
            
            function addSpeakButtons() {
                const questionBoxes = document.querySelectorAll('.question-box');
                
                questionBoxes.forEach(box => {
                    // Find the question text (usually in a <p> tag with <strong>)
                    const questionElement = box.querySelector('p strong');
                    if (questionElement) {
                        const questionText = questionElement.textContent;
                        
                        // Create speak button
                        const speakButton = document.createElement('button');
                        speakButton.className = 'speak-button';
                        speakButton.textContent = '🔊 Speak';
                        speakButton.title = 'Listen to this question';
                        
                        speakButton.onclick = function() {
                            speakText(questionText, this);
                        };
                        
                        box.appendChild(speakButton);
                        
                        // Create record button
                        const recordButton = document.createElement('button');
                        recordButton.className = 'record-button';
                        recordButton.textContent = '🎤 Record';
                        recordButton.title = 'Record your answer';
                        
                        recordButton.onclick = function() {
                            handleRecording(box, this);
                        };
                        
                        box.appendChild(recordButton);
                    }
                });
            }
            
            // Audio Recording functionality
            let mediaRecorder = null;
            let audioChunks = [];
            let isRecording = false;
            let audioStream = null;
            let permissionGranted = false;
            
            // Check microphone permission on page load
            async function checkMicrophonePermission() {
                try {
                    const permission = await navigator.permissions.query({ name: 'microphone' });
                    if (permission.state === 'granted') {
                        permissionGranted = true;
                        console.log('Microphone permission already granted');
                        updateRecordButtonStates(true);
                    } else {
                        updateRecordButtonStates(false);
                    }
                    
                    // Listen for permission changes
                    permission.addEventListener('change', function() {
                        permissionGranted = (this.state === 'granted');
                        updateRecordButtonStates(permissionGranted);
                        console.log('Microphone permission changed to:', this.state);
                    });
                } catch (error) {
                    console.log('Permission API not supported, will request on first use');
                    updateRecordButtonStates(false);
                }
            }
            
            function updateRecordButtonStates(hasPermission) {
                const recordButtons = document.querySelectorAll('.record-button');
                recordButtons.forEach(button => {
                    if (hasPermission) {
                        button.style.opacity = '1';
                        button.title = 'Record your answer';
                    } else {
                        button.style.opacity = '0.7';
                        button.title = 'Click to allow microphone access';
                    }
                });
            }
            
            async function handleRecording(box, button) {
                if (isRecording) {
                    // Stop recording
                    stopRecording(box, button);
                } else {
                    // Start recording
                    await startRecording(box, button);
                }
            }
            
            async function startRecording(box, button) {
                try {
                    // Check if we already have a stream
                    if (!audioStream || !audioStream.active) {
                        // Request microphone permission only if we don't have an active stream
                        audioStream = await navigator.mediaDevices.getUserMedia({ 
                            audio: {
                                echoCancellation: true,
                                noiseSuppression: true,
                                sampleRate: 44100
                            } 
                                                 });
                         permissionGranted = true;
                         updateRecordButtonStates(true);
                         console.log('Microphone access granted and stream created');
                         
                         // Show success message for first-time permission
                         if (!localStorage.getItem('micPermissionGranted')) {
                             localStorage.setItem('micPermissionGranted', 'true');
                             setTimeout(() => {
                                 const permissionMsg = document.createElement('div');
                                 permissionMsg.style.cssText = `
                                     position: fixed;
                                     top: 20px;
                                     left: 50%;
                                     transform: translateX(-50%);
                                     background: linear-gradient(135deg, #28a745, #20c997);
                                     color: white;
                                     padding: 15px 25px;
                                     border-radius: 15px;
                                     font-size: 1em;
                                     font-weight: bold;
                                     z-index: 10000;
                                     box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                                     animation: fadeIn 0.5s ease-in;
                                 `;
                                 permissionMsg.innerHTML = '🎤 Microphone ready! You won\'t be asked for permission again.';
                                 document.body.appendChild(permissionMsg);
                                 
                                 setTimeout(() => {
                                     permissionMsg.remove();
                                 }, 4000);
                             }, 500);
                         }
                    }
                    
                    mediaRecorder = new MediaRecorder(audioStream, {
                        mimeType: MediaRecorder.isTypeSupported('audio/webm') ? 'audio/webm' : 'audio/mp4'
                    });
                    audioChunks = [];
                    
                    mediaRecorder.ondataavailable = (event) => {
                        if (event.data.size > 0) {
                            audioChunks.push(event.data);
                        }
                    };
                    
                    mediaRecorder.onstop = () => {
                        const mimeType = mediaRecorder.mimeType || 'audio/webm';
                        const audioBlob = new Blob(audioChunks, { type: mimeType });
                        const audioUrl = URL.createObjectURL(audioBlob);
                        
                        // Save recording to localStorage
                        saveRecordingToStorage(box, audioBlob, mimeType);
                        
                        createAudioPlayer(box, audioUrl, audioBlob, mimeType);
                    };
                    
                    mediaRecorder.onerror = (event) => {
                        console.error('MediaRecorder error:', event.error);
                        stopRecording(box, button);
                        alert('Recording error occurred. Please try again.');
                    };
                    
                    mediaRecorder.start(1000); // Collect data every 1 second
                    isRecording = true;
                    
                    // Update button
                    button.classList.add('recording');
                    button.textContent = '⏹️ Stop';
                    button.title = 'Stop recording';
                    
                    // Show recording indicator
                    showRecordingIndicator(box);
                    
                } catch (error) {
                    console.error('Error accessing microphone:', error);
                    permissionGranted = false;
                    
                    if (error.name === 'NotAllowedError') {
                        alert('Microphone access was denied. Please:\n1. Click the microphone icon in your browser address bar\n2. Select "Allow" for microphone access\n3. Refresh the page and try again');
                    } else if (error.name === 'NotFoundError') {
                        alert('No microphone found. Please check that your microphone is connected and try again.');
                    } else {
                        alert('Error accessing microphone: ' + error.message + '\n\nPlease check your microphone settings and try again.');
                    }
                }
            }
            
            function stopRecording(box, button) {
                if (mediaRecorder && isRecording) {
                    mediaRecorder.stop();
                    isRecording = false;
                    
                    // Update button
                    button.classList.remove('recording');
                    button.textContent = '🎤 Record';
                    button.title = 'Record your answer';
                    
                    // Hide recording indicator
                    hideRecordingIndicator(box);
                }
            }
            
            // Clean up audio stream when page is closed
            window.addEventListener('beforeunload', function() {
                if (audioStream) {
                    audioStream.getTracks().forEach(track => track.stop());
                }
            });
            
            function showRecordingIndicator(box) {
                const indicator = document.createElement('div');
                indicator.className = 'recording-indicator';
                indicator.style.cssText = `
                    position: absolute;
                    top: 110px;
                    right: 15px;
                    background: #e74c3c;
                    color: white;
                    padding: 5px 10px;
                    border-radius: 15px;
                    font-size: 0.8em;
                    font-weight: bold;
                    animation: pulse 1s infinite;
                    z-index: 5;
                `;
                indicator.textContent = '🔴  Recording...';
                box.appendChild(indicator);
            }
            
            function hideRecordingIndicator(box) {
                const indicator = box.querySelector('.recording-indicator');
                if (indicator) {
                    indicator.remove();
                }
            }
            
            // Save recording to localStorage
            function saveRecordingToStorage(box, audioBlob, mimeType) {
                const questionIndex = getQuestionIndex(box);
                const reader = new FileReader();
                
                reader.onload = function() {
                    const base64Audio = reader.result;
                    const recordings = JSON.parse(localStorage.getItem('visaRecordings') || '{}');
                    recordings[questionIndex] = {
                        data: base64Audio,
                        mimeType: mimeType,
                        timestamp: new Date().toISOString()
                    };
                    localStorage.setItem('visaRecordings', JSON.stringify(recordings));
                    console.log('Recording saved for question', questionIndex);
                    
                    // Show save confirmation
                    const saveMsg = document.createElement('div');
                    saveMsg.style.cssText = `
                        position: fixed;
                        bottom: 80px;
                        right: 20px;
                        background: #28a745;
                        color: white;
                        padding: 10px 20px;
                        border-radius: 25px;
                        font-size: 0.9em;
                        z-index: 1000;
                        animation: fadeIn 0.3s ease-in;
                    `;
                    saveMsg.textContent = '💾 Recording saved!';
                    document.body.appendChild(saveMsg);
                    
                    setTimeout(() => {
                        saveMsg.remove();
                    }, 2000);
                };
                
                reader.readAsDataURL(audioBlob);
            }
            
            // Get unique question index
            function getQuestionIndex(box) {
                const allQuestionBoxes = document.querySelectorAll('.question-box');
                return Array.from(allQuestionBoxes).indexOf(box);
            }
            
            // Load saved recordings
            function loadSavedRecordings() {
                const recordings = JSON.parse(localStorage.getItem('visaRecordings') || '{}');
                const questionBoxes = document.querySelectorAll('.question-box');
                
                Object.keys(recordings).forEach(questionIndex => {
                    const box = questionBoxes[parseInt(questionIndex)];
                    if (box && recordings[questionIndex]) {
                        const { data, mimeType } = recordings[questionIndex];
                        
                        // Convert base64 back to blob
                        fetch(data)
                            .then(res => res.blob())
                            .then(blob => {
                                const audioUrl = URL.createObjectURL(blob);
                                createAudioPlayer(box, audioUrl, blob, mimeType, true);
                            });
                    }
                });
            }
            
            function createAudioPlayer(box, audioUrl, audioBlob = null, mimeType = 'audio/webm', isLoaded = false) {
                // Remove existing audio player if any
                const existingPlayer = box.querySelector('.audio-player');
                if (existingPlayer) {
                    existingPlayer.remove();
                }
                
                const timestamp = isLoaded ? 'Saved recording' : new Date().toLocaleString();
                
                const audioPlayer = document.createElement('div');
                audioPlayer.className = 'audio-player';
                audioPlayer.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                        <span style="font-weight: bold; color: #8B4513;">🎵 Your Answer:</span>
<button onclick="playRecording(this)" style="background: #8B4513; color: white; border: none; padding: 5px 10px; border-radius: 5px; font-size: 0.8em; cursor: pointer;">▶️ Play</button>
                        <button onclick="deleteRecording(this)" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 5px; font-size: 0.8em; cursor: pointer;">🗑️ Delete</button>
                        <span style="font-size: 0.7em; color: #666; margin-left: auto;">${timestamp}</span>
                    </div>
                    <audio controls style="width: 100%; height: 40px;">
                        <source src="${audioUrl}" type="${mimeType}">
                        Your browser does not support the audio element.
                    </audio>
                `;
                
                box.appendChild(audioPlayer);
            }
            
            // Global functions for audio player buttons
            window.playRecording = function(button) {
                const audio = button.parentElement.nextElementSibling;
                if (audio.paused) {
                    audio.play();
                    button.textContent = '⏸️ Pause';
                } else {
                    audio.pause();
                    button.textContent = '▶️ Play';
                }
            };
            
            window.deleteRecording = function(button) {
                const audioPlayer = button.closest('.audio-player');
                if (audioPlayer) {
                    const questionBox = audioPlayer.closest('.question-box');
                    
                    // Remove from localStorage
                    if (questionBox) {
                        const questionIndex = getQuestionIndex(questionBox);
                        const recordings = JSON.parse(localStorage.getItem('visaRecordings') || '{}');
                        delete recordings[questionIndex];
                        localStorage.setItem('visaRecordings', JSON.stringify(recordings));
                        console.log('Recording deleted for question', questionIndex);
                    }
                    
                    // Clean up audio URL to prevent memory leaks
                    const audio = audioPlayer.querySelector('audio');
                    if (audio && audio.src) {
                        URL.revokeObjectURL(audio.src);
                    }
                    audioPlayer.remove();
                    
                    // Show delete confirmation
                    const deleteMsg = document.createElement('div');
                    deleteMsg.style.cssText = `
                        position: fixed;
                        bottom: 80px;
                        right: 20px;
                        background: #e74c3c;
                        color: white;
                        padding: 10px 20px;
                        border-radius: 25px;
                        font-size: 0.9em;
                        z-index: 1000;
                        animation: fadeIn 0.3s ease-in;
                    `;
                    deleteMsg.textContent = '🗑️ Recording deleted';
                    document.body.appendChild(deleteMsg);
                    
                    setTimeout(() => {
                        deleteMsg.remove();
                    }, 2000);
                }
            };
            
            // Initialize everything
            updateXPDisplay();
            createMusicControl();
            addSpeakButtons();
            checkMicrophonePermission(); // Check microphone permission on page load
            
            // Load saved recordings after a short delay to ensure DOM is ready
            setTimeout(() => {
                loadSavedRecordings();
            }, 100);
            
            // Show initial quote
            setTimeout(() => {
                showRandomQuote();
            }, 2000);
            
            // Add click handler for music autoplay
            document.addEventListener('click', function() {
                // This ensures user interaction is detected for autoplay
            }, { once: true });
            
            // Quiz System
            const quizQuestions = [
                "What is your purpose for visiting the United States?",
                "How long do you plan to stay in the United States?",
                "Who is paying for your trip?",
                "What does your son do in the United States?",
                "Where will you be staying in the U.S.?",
                "What do you do in your home country?",
                "Have you traveled outside your country before?",
                "What is your total estimated cost for the trip?",
                "Why are you visiting at this particular time?",
                "How often do you communicate with your son?",
                "What assets or property do you own in your home country?",
                "Are you married? What does your spouse do?",
                "How many children do you have? What do they do?",
                "What visa does your son hold and where does he work?",
                "Will you be staying with your son during your visit?",
                "Have you ever been denied a visa?",
                "Have you visited the U.S. before?",
                "What are your son's future plans in the U.S.?",
                "How will you manage expenses if something unexpected happens?",
                "Who will take care of your responsibilities while you're away?"
            ];
            
            let currentQuizQuestions = [];
            let currentQuestionIndex = 0;
            let quizTimer = null;
            let quizTimeLeft = 30;
            let quizScores = [];
            let quizRecording = false;
            
            window.startQuiz = function() {
                // Reset quiz state
                currentQuestionIndex = 0;
                quizScores = [];
                quizRecording = false;
                
                // Select 4 random questions
                currentQuizQuestions = getRandomQuestions(4);
                
                // Show quiz active section
                document.getElementById('quiz-intro').style.display = 'none';
                document.getElementById('quiz-results').style.display = 'none';
                document.getElementById('quiz-active').style.display = 'block';
                
                // Reset recording button
                resetQuizRecordingButton();
                
                // Start first question
                showQuizQuestion();
            };
            
            function getRandomQuestions(count) {
                const shuffled = [...quizQuestions].sort(() => 0.5 - Math.random());
                return shuffled.slice(0, count);
            }
            
            function showQuizQuestion() {
                const questionNum = currentQuestionIndex + 1;
                const question = currentQuizQuestions[currentQuestionIndex];
                
                // Update progress
                document.getElementById('quiz-progress').textContent = `Question ${questionNum} of 4`;
                document.getElementById('quiz-progress-bar').style.width = `${(questionNum / 4) * 100}%`;
                
                // Show question
                document.getElementById('quiz-question').textContent = question;
                
                // Reset timer
                quizTimeLeft = 30;
                document.getElementById('timer-display').textContent = quizTimeLeft;
                
                // Show controls, hide answer section
                document.getElementById('quiz-controls').style.display = 'block';
                document.getElementById('quiz-answer-section').style.display = 'none';
                document.getElementById('quiz-rating-section').style.display = 'none';
                
                // Reset recording button for new question
                resetQuizRecordingButton();
                
                // Start timer
                startQuizTimer();
            }
            
            function resetQuizRecordingButton() {
                const btn = document.getElementById('quiz-record-btn');
                if (btn) {
                    btn.textContent = '🎤 Start Recording Answer';
                    btn.style.background = '#e74c3c';
                    btn.disabled = false;
                    quizRecording = false;
                    
                    // Clear any existing audio player
                    const existingPlayer = document.getElementById('quiz-audio-player');
                    if (existingPlayer) {
                        existingPlayer.remove();
                    }
                }
            }
            
            function startQuizTimer() {
                if (quizTimer) clearInterval(quizTimer);
                
                quizTimer = setInterval(() => {
                    quizTimeLeft--;
                    document.getElementById('timer-display').textContent = quizTimeLeft;
                    
                    if (quizTimeLeft <= 0) {
                        clearInterval(quizTimer);
                        // Auto-advance to answer section
                        readyToAnswer();
                    }
                }, 1000);
            }
            
            window.readyToAnswer = function() {
                if (quizTimer) clearInterval(quizTimer);
                
                // Hide timer and controls
                document.getElementById('quiz-timer').style.display = 'none';
                document.getElementById('quiz-controls').style.display = 'none';
                
                // Show answer section
                document.getElementById('quiz-answer-section').style.display = 'block';
            };
            
            let quizMediaRecorder = null;
            let quizAudioChunks = [];
            let quizAudioBlob = null;
            
            window.startQuizRecording = function() {
                const btn = document.getElementById('quiz-record-btn');
                
                if (!quizRecording) {
                    startActualQuizRecording();
                } else {
                    stopQuizRecording();
                }
            };
            
            async function startActualQuizRecording() {
                try {
                    // Use existing audio stream if available
                    if (!audioStream || !audioStream.active) {
                        audioStream = await navigator.mediaDevices.getUserMedia({ 
                            audio: {
                                echoCancellation: true,
                                noiseSuppression: true,
                                sampleRate: 44100
                            } 
                        });
                    }
                    
                    quizMediaRecorder = new MediaRecorder(audioStream, {
                        mimeType: MediaRecorder.isTypeSupported('audio/webm') ? 'audio/webm' : 'audio/mp4'
                    });
                    quizAudioChunks = [];
                    
                    quizMediaRecorder.ondataavailable = (event) => {
                        if (event.data.size > 0) {
                            quizAudioChunks.push(event.data);
                        }
                    };
                    
                    quizMediaRecorder.onstop = () => {
                        // Show processing indicator
                        const btn = document.getElementById('quiz-record-btn');
                        btn.textContent = '⏳ Processing...';
                        btn.style.background = '#3498db';
                        
                        setTimeout(() => {
                            const mimeType = quizMediaRecorder.mimeType || 'audio/webm';
                            quizAudioBlob = new Blob(quizAudioChunks, { type: mimeType });
                            createQuizAudioPlayer();
                        }, 500); // Small delay for better UX
                    };
                    
                    quizMediaRecorder.start(1000);
                    quizRecording = true;
                    
                    const btn = document.getElementById('quiz-record-btn');
                    btn.textContent = '⏹️ Stop Recording';
                    btn.style.background = '#f39c12';
                    
                    // Auto-stop after 15 seconds
                    setTimeout(() => {
                        if (quizRecording) {
                            stopQuizRecording();
                        }
                    }, 15000);
                    
                } catch (error) {
                    console.error('Quiz recording error:', error);
                    alert('Recording failed. Please allow microphone access and try again.');
                }
            }
            
            function stopQuizRecording() {
                if (quizMediaRecorder && quizRecording) {
                    quizMediaRecorder.stop();
                    quizRecording = false;
                    
                    const btn = document.getElementById('quiz-record-btn');
                    btn.textContent = '✅ Recorded';
                    btn.style.background = '#28a745';
                    btn.disabled = true;
                }
            }
            
            function createQuizAudioPlayer() {
                // Remove existing player if any
                const existingPlayer = document.getElementById('quiz-audio-player');
                if (existingPlayer) {
                    existingPlayer.remove();
                }
                
                const audioUrl = URL.createObjectURL(quizAudioBlob);
                
                const audioPlayerContainer = document.createElement('div');
                audioPlayerContainer.id = 'quiz-audio-player';
                audioPlayerContainer.style.cssText = `
                    background: rgba(255,255,255,0.1);
                    padding: 15px;
                    border-radius: 15px;
                    margin: 15px 0;
                    text-align: center;
                `;
                
                audioPlayerContainer.innerHTML = `
                    <h4 style="color: white; margin: 0 0 10px 0;">🎵 Listen to Your Answer</h4>
                    <p style="color: #ccc; font-size: 0.9em; margin: 5px 0;">Review your response before rating yourself</p>
                    <audio controls style="width: 100%; max-width: 300px; margin: 10px 0;" onloadstart="this.style.opacity='0.5'" oncanplay="this.style.opacity='1'">
                        <source src="${audioUrl}" type="${quizAudioBlob.type}">
                        Your browser does not support the audio element.
                    </audio>
                    <div style="margin-top: 15px;">
                        <button onclick="proceedToRating()" style="background: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 15px; font-weight: bold; cursor: pointer; transition: all 0.2s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            ✅ Ready to Rate My Answer
                        </button>
                    </div>
                `;
                
                // Insert after the recording section
                const recordSection = document.querySelector('#quiz-answer-section > div:first-child');
                recordSection.after(audioPlayerContainer);
            }
            
            window.proceedToRating = function() {
                // Show rating section
                document.getElementById('quiz-rating-section').style.display = 'block';
                
                // Add a small delay for smooth animation
                setTimeout(() => {
                    // Scroll to rating section
                    document.getElementById('quiz-rating-section').scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center' 
                    });
                }, 300);
            };
            
            window.rateAnswer = function(rating) {
                quizScores.push(rating);
                
                // Show feedback animation
                const ratingBtns = document.querySelectorAll('.quiz-rating-btn');
                ratingBtns.forEach(btn => btn.style.opacity = '0.5');
                event.target.style.opacity = '1';
                event.target.style.transform = 'scale(1.1)';
                
                setTimeout(() => {
                    // Move to next question or show results
                    currentQuestionIndex++;
                    
                    if (currentQuestionIndex < 4) {
                        // Reset for next question
                        document.getElementById('quiz-timer').style.display = 'block';
                        
                        // Reset rating buttons
                        ratingBtns.forEach(btn => {
                            btn.style.opacity = '1';
                            btn.style.transform = 'scale(1)';
                        });
                        
                        // Clean up audio URLs to prevent memory leaks
                        const audioPlayer = document.getElementById('quiz-audio-player');
                        if (audioPlayer) {
                            const audio = audioPlayer.querySelector('audio');
                            if (audio && audio.src) {
                                URL.revokeObjectURL(audio.src);
                            }
                        }
                        
                        showQuizQuestion();
                    } else {
                        showQuizResults();
                    }
                }, 1000);
            };
            
            function showQuizResults() {
                // Hide active quiz
                document.getElementById('quiz-active').style.display = 'none';
                
                // Calculate score
                const totalScore = quizScores.reduce((a, b) => a + b, 0);
                const averageScore = totalScore / 4;
                const percentage = (averageScore / 4) * 100;
                
                // Show results
                document.getElementById('quiz-results').style.display = 'block';
                document.getElementById('quiz-score').innerHTML = `Your Score: ${totalScore}/16 points (${Math.round(percentage)}%)`;
                
                // Show feedback
                let feedback = '';
                let emoji = '';
                if (percentage >= 90) {
                    feedback = "🌟 Outstanding! You're very well prepared for your interview!";
                    emoji = "🏆";
                } else if (percentage >= 75) {
                    feedback = "😊 Great job! You're well prepared with minor areas to polish.";
                    emoji = "🎊";
                } else if (percentage >= 60) {
                    feedback = "😐 Good progress! Review the workbook and practice more.";
                    emoji = "📚";
                } else {
                    feedback = "😰 Keep practicing! Focus on the tips in each section.";
                    emoji = "💪";
                }
                
                document.getElementById('quiz-feedback').innerHTML = `${emoji} ${feedback}`;
                
                // Save quiz result
                const quizResults = JSON.parse(localStorage.getItem('quizResults') || '[]');
                quizResults.push({
                    date: new Date().toLocaleDateString(),
                    score: totalScore,
                    percentage: Math.round(percentage)
                });
                localStorage.setItem('quizResults', JSON.stringify(quizResults));
                
                // Add XP based on performance
                if (percentage >= 75) {
                    addXP(50);
                    showAchievement('Quiz Master! 🎯', 'Scored 75%+ on quiz! +50 XP');
                } else if (percentage >= 50) {
                    addXP(25);
                }
                
                // Show celebratory animation
                createQuizCelebration();
            }
            
            function createQuizCelebration() {
                for (let i = 0; i < 10; i++) {
                    setTimeout(() => {
                        const emoji = document.createElement('div');
                        emoji.className = 'floating-emoji';
                        emoji.textContent = ['🎉', '🎊', '✨', '🌟', '🎯'][Math.floor(Math.random() * 5)];
                        emoji.style.left = Math.random() * window.innerWidth + 'px';
                        emoji.style.top = window.innerHeight + 'px';
                        emoji.style.fontSize = '2em';
                        document.body.appendChild(emoji);
                        
                        setTimeout(() => {
                            emoji.remove();
                        }, 3000);
                    }, i * 200);
                }
            }
            
            window.resetQuiz = function() {
                // Reset to intro
                document.getElementById('quiz-active').style.display = 'none';
                document.getElementById('quiz-results').style.display = 'none';
                document.getElementById('quiz-intro').style.display = 'block';
                
                // Clear any timers
                if (quizTimer) clearInterval(quizTimer);
                
                // Stop any ongoing recording
                if (quizMediaRecorder && quizRecording) {
                    quizMediaRecorder.stop();
                }
                
                // Clean up audio URLs to prevent memory leaks
                const audioPlayer = document.getElementById('quiz-audio-player');
                if (audioPlayer) {
                    const audio = audioPlayer.querySelector('audio');
                    if (audio && audio.src) {
                        URL.revokeObjectURL(audio.src);
                    }
                    audioPlayer.remove();
                }
                
                // Reset variables
                currentQuestionIndex = 0;
                quizScores = [];
                quizRecording = false;
                quizMediaRecorder = null;
                quizAudioChunks = [];
                quizAudioBlob = null;
                
                // Reset recording button
                resetQuizRecordingButton();
            };
        });
    </script>
</head>
<body>
    <!-- Background -->
    <div class="gradient-bg"></div>
    

    

    
    <!-- Light Shafts -->


<div class="main-container">
    <div class="title-container">
        <div class="floating-icons">⚔️</div>
        <div class="floating-icons">🛡️</div>
        <div class="floating-icons">🏆</div>
        <div class="floating-icons">🌟</div>

<h1>🗺️ 🏰 Visa  Quest: Journey to America</h1>
    </div>
    
    <div class="progress-bar">
        <div class="progress-fill"></div>
    </div>
    
    <div class="xp-bar">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <span>🎯 <span id="current-level">Novice Applicant</span></span>
            <span>⭐ XP: <span id="current-xp">0</span> / <span id="next-level-xp">100</span></span>
        </div>
        <div class="xp-progress">
            <div class="xp-fill" id="xp-fill"></div>
        </div>
        <div id="level-up-message" style="display: none; font-weight: bold; color: #ffd700; text-align: center; margin-top: 10px;">🎉 Level Up! 🎉</div>
    </div>
    

<div style="background: linear-gradient(135deg, #B8860B 0%, #654321 100%); border-left: 5px solid #FFD700; padding: 20px; margin: 15px 0; border-radius: 0 15px 15px 0; position: relative; animation: questPulse 3s infinite;">
    <h3 style="margin: 0 0 15px 0; color: white; text-shadow: 1px 1px 1px rgb(255, 255, 255);"><span class="emoji-icon">🗺️</span>Quest Guide: How to Complete Your Visa Adventure</h3>
    <p style="color: white; margin-bottom: 15px;">This RPG follows the Japanese study method with:</p>
    <ul style="color: white; margin-bottom: 15px;">
        <li><strong>🏰 Quest Missions</strong> - Answer questions to gain XP and level up</li>
        <li><strong>⚔️ Battle Strategies</strong> - Key tips and interview techniques</li>
        <li><strong>🎮 Memory Power-ups</strong> - Common mistakes to avoid</li>
        <li><strong>📚 Skill Scrolls</strong> - Space for notes and illustrations</li>
    </ul>
    <div style="text-align: center; margin-top: 15px;">
        <span style="font-size: 2.5em;">⚔️</span>
        <p style="margin: 5px 0; font-size: 0.9em; color: #FFD700; font-weight: bold;">Quest Goal: Defeat the Interview Boss and claim your visa! ⚔️</p>
    </div>
</div>

<div style="background: #fff3cd; border: 2px solid #ffc107; padding: 20px; border-radius: 15px; margin: 20px 0; box-shadow: 0 4px 15px rgba(255, 193, 7, 0.2);">
    <h4 style="margin: 0 0 15px 0; color: #856404; text-align: center; font-size: 1.3em;">⚠️ CRITICAL REMINDER ⚠️</h4>
    <p style="color: #856404; margin: 0; text-align: center; font-size: 1.1em; line-height: 1.6;">
        <strong>The sample answers in this workbook are EXAMPLES ONLY!</strong><br>
        You must give <strong>HONEST, TRUE answers</strong> based on <strong>YOUR OWN circumstances</strong>.<br>
        <strong>NEVER lie or copy these answers exactly!</strong> Always tell the truth in your visa interview.
    </p>
</div>

<style>
@keyframes questPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
}
</style>

<div class="section-divider"></div>

<div style="background: linear-gradient(135deg, #556B2F 0%, #6B8E23 100%); color: white; padding: 20px; border-radius: 15px; margin: 20px 0; border: 3px solid #FFD700; box-shadow: 0 8px 25px rgba(85, 107, 47, 0.3);">
    <h2 style="margin: 0; text-align: center; font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">🏰 Chapter 1: The Village of Purpose</h2>
    <p style="text-align: center; margin: 10px 0; font-size: 1.2em; color: #ffffff;">⚔️ Quest: Master the Art of Clear Communication ⚔️</p>
    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px;">
        <span style="font-size: 2em;">🗺️</span>
        <span style="font-size: 2em;">⚔️</span>
        <span style="font-size: 2em;">🛡️</span>
        <span style="font-size: 2em;">🏆</span>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 1.1: The Purpose Scroll</h3>
    <p><strong>What is your purpose for visiting the United States?</strong></p>
    
    <div style="text-align: center; margin: 15px 0;">
        <span style="font-size: 3em;">🗺️</span>
        <p style="margin: 5px 0; font-size: 0.9em; color: #666;">🎮 Think: Family + Tourism Quest</p>
    </div>
    
    <p><em>Write your answer here (keep it short - 1-2 sentences):</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I am visiting my son and his family for tourism."</li>
            <li><strong>Detailed:</strong> "I am visiting my son and his family in California for tourism, sightseeing, and family time."</li>
            <li><strong>Professional:</strong> "I am visiting the United States for tourism purposes to see my son and his family, visit tourist attractions, and experience American culture."</li>
        </ol>
        <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 10px; border-radius: 5px; margin-top: 10px;">
            <strong>⚠️ IMPORTANT:</strong> These are examples only. Give honest, true answers based on YOUR own circumstances. Never lie or copy these answers exactly!
        </div>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Keep it simple - "To visit my son/daughter and do sightseeing" is perfect.
    </div>
    
    <div style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border: 2px solid #8B4513;">
        <strong>🎮 Quest Map:</strong>
        <div style="display: flex; justify-content: space-around; margin-top: 10px;">
            <span style="font-size: 2em;">👨‍👩‍👧‍👦</span>
            <span style="font-size: 2em;">🗽</span>
            <span style="font-size: 2em;">🏙️</span>
            <span style="font-size: 2em;">📸</span>
        </div>
        <p style="text-align: center; margin-top: 10px; font-size: 0.9em; color: #8B4513; font-weight: bold;">🗺️ Your Adventure Path 🗺️</p>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 1.2: The Duration Scroll</h3>
    <p><strong>How long do you plan to stay in the United States?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I plan to stay for 2 weeks."</li>
            <li><strong>Detailed:</strong> "I plan to stay for exactly 14 days, from June 15th to June 29th."</li>
            <li><strong>Professional:</strong> "I plan to stay for exactly 14 days, arriving on June 15th and departing on June 29th, 2024."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Memory Aid:</strong> Always mention specific dates and emphasize it's temporary.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 1.3: The Choice Scroll</h3>
    <p><strong>Why did you choose to visit the U.S. instead of another country?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "Because my son lives in the U.S. and I want to visit him."</li>
            <li><strong>Detailed:</strong> "Because my son lives in California and I want to visit him and his family, plus see tourist attractions."</li>
            <li><strong>Professional:</strong> "Because my son lives and works in California, and I want to visit him and his family while also experiencing American culture and tourist attractions."</li>
        </ol>
    </div>
    
    <div class="warning-box">
        <strong>⚠️ Common Mistake:</strong> Don't say "because it's better" - focus on family connection.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 1.4: The Itinerary Scroll</h3>
    <p><strong>Do you have a travel itinerary?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "Yes, I have a basic itinerary planned."</li>
            <li><strong>Detailed:</strong> "Yes, I have a 2-week itinerary including visiting my son, sightseeing in San Francisco, and visiting tourist attractions."</li>
            <li><strong>Professional:</strong> "Yes, I have a detailed 2-week itinerary including family visits, tourist attractions in San Francisco, shopping, and cultural activities."</li>
        </ol>
    </div>
    
    <div style="background-color: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 10px;">
        <strong>📝 Practice Space - Sketch your 2-week itinerary:</strong><br>
        <div style="margin: 8px 0;">
            <label>Week 1:</label>
            <input type="text" placeholder="e.g., Visit son, NYC sightseeing, family time" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <label>Week 2:</label>
            <input type="text" placeholder="e.g., Shopping, museums, parks, prepare to return" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 1.5: The Timing Scroll</h3>
    <p><strong>Why are you visiting at this particular time?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "Because my son has vacation time and the weather is good for sightseeing."</li>
            <li><strong>Detailed:</strong> "Because my son has vacation time in June, and the weather in California is perfect for sightseeing and outdoor activities."</li>
            <li><strong>Professional:</strong> "Because my son has scheduled vacation time in June, and the weather in California during this period is ideal for tourism and outdoor activities."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Mention specific reasons like "son's vacation time" or "good weather for sightseeing."
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 1.6: The Lodging Scroll</h3>
    <p><strong>Where will you be staying in the U.S.?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I will stay with my son in San Francisco."</li>
            <li><strong>Detailed:</strong> "I will stay with my son at his apartment in San Francisco, and also book a hotel for some nights."</li>
            <li><strong>Professional:</strong> "I will primarily stay with my son at his residence in San Francisco, with some nights at a hotel for additional comfort and privacy."</li>
        </ol>
    </div>
    
    <div class="warning-box">
        <strong>⚠️ Important:</strong> Be consistent with your DS-160 application!
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 1.7: The Flight Scroll</h3>
    <p><strong>Have you booked your flight ticket(s)?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "Not yet, I will book after getting the visa."</li>
            <li><strong>Detailed:</strong> "Not yet, I will book my flights after getting the visa approval."</li>
            <li><strong>Professional:</strong> "I have not booked my flights yet. I plan to make the booking after receiving visa approval to ensure proper travel dates."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> It's okay to say "not yet" - many people book after getting the visa.
    </div>
</div>

<div class="section-divider"></div>

<div style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: white; padding: 20px; border-radius: 15px; margin: 20px 0; border: 3px solid #8B4513; box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);">
    <h2 style="margin: 0; text-align: center; font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">🏰 Chapter 2: The Treasury of Gold</h2>
    <p style="text-align: center; margin: 10px 0; font-size: 1.2em; color: #8B4513;">⚔️ Quest: Master the Art of Financial Independence ⚔️</p>
    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px;">
        <span style="font-size: 2em;">💰</span>
        <span style="font-size: 2em;">⚔️</span>
        <span style="font-size: 2em;">🛡️</span>
        <span style="font-size: 2em;">🏆</span>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 2.1: The Gold Scroll</h3>
    <p><strong>Who is paying for your trip?</strong></p>
    
    <div style="text-align: center; margin: 15px 0;">
        <span style="font-size: 3em;">💳</span>
        <p style="margin: 5px 0; font-size: 0.9em; color: #666;">Self-Sponsored = Independent</p>
    </div>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I am paying for my own trip from my savings."</li>
            <li><strong>Detailed:</strong> "We are paying all expenses ourselves from our savings and pension income."</li>
            <li><strong>Professional:</strong> "I am self-sponsored and will cover all travel, accommodation, and daily expenses from my personal funds."</li>
        </ol>
        <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 10px; border-radius: 5px; margin-top: 10px;">
            <strong>⚠️ IMPORTANT:</strong> These are examples only. Give honest, true answers based on YOUR own circumstances. Never lie or copy these answers exactly!
        </div>
    </div>
    
    <div class="tip-box">
        <strong>💡 Key Phrase:</strong> "We are paying all expenses ourselves from our savings."
    </div>
    
    <div style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); padding: 15px; border-radius: 10px; margin-top: 15px;">
        <strong>💪 Independence Check:</strong>
        <div style="display: flex; justify-content: space-around; margin-top: 10px;">
            <span style="font-size: 1.5em;">🏦</span>
            <span style="font-size: 1.5em;">💵</span>
            <span style="font-size: 1.5em;">📊</span>
            <span style="font-size: 1.5em;">✅</span>
        </div>
        <p style="text-align: center; margin-top: 10px; font-size: 0.9em; color: #e65100;">No financial dependency on child</p>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 2.2: The Treasure Map</h3>
    <p><strong>Can you show bank statements as proof of funds?</strong></p>
    
    <p><em>Your response strategy:</em></p>
    <div class="answer-space"></div>
    
    <div class="checklist">
        <strong>📋 Checklist - Documents to bring:</strong><br>
        <input type="checkbox"> Bank statements (last 6 months)<br>
        <input type="checkbox"> Salary/pension slips<br>
        <input type="checkbox"> Property documents<br>
        <input type="checkbox"> Investment certificates
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 2.3: The Cost Calculator</h3>
    <p><strong>What is your total estimated cost for the trip?</strong></p>
    
    <div style="background-color: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 10px;">
        <strong>Break down your calculation:</strong><br>
        <div style="margin: 8px 0;">
            <label>Flight tickets: $</label>
            <input type="number" placeholder="0" style="width: 120px; padding: 5px; border: 1px solid #ddd; border-radius: 3px;">
        </div>
        <div style="margin: 8px 0;">
            <label>Accommodation: $</label>
            <input type="number" placeholder="0" style="width: 120px; padding: 5px; border: 1px solid #ddd; border-radius: 3px;">
        </div>
        <div style="margin: 8px 0;">
            <label>Food & transport: $</label>
            <input type="number" placeholder="0" style="width: 120px; padding: 5px; border: 1px solid #ddd; border-radius: 3px;">
        </div>
        <div style="margin: 8px 0;">
            <label>Shopping/misc: $</label>
            <input type="number" placeholder="0" style="width: 120px; padding: 5px; border: 1px solid #ddd; border-radius: 3px;">
        </div>
        <div style="margin: 8px 0;">
            <label>Emergency fund: $</label>
            <input type="number" placeholder="0" style="width: 120px; padding: 5px; border: 1px solid #ddd; border-radius: 3px;">
        </div>
        <div style="margin: 8px 0; font-weight: bold;">
            <label>TOTAL: $</label>
            <input type="number" placeholder="0" style="width: 120px; padding: 5px; border: 2px solid #3498db; border-radius: 3px; font-weight: bold;">
        </div>
    </div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "Around $5,000 for a 2-week trip including flights and accommodation."</li>
            <li><strong>Detailed:</strong> "Approximately $6,500 total - $2,000 for flights, $2,500 for accommodation, $1,500 for food and transport, and $500 for shopping."</li>
            <li><strong>Professional:</strong> "My estimated total cost is $7,000, which includes airfare, hotel accommodation, daily expenses, and an emergency fund for unexpected costs."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Research actual costs and be realistic, not too high or too low.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 2.4: The Income Scroll</h3>
    <p><strong>How much do you earn, and what is your monthly income?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I earn about $3,000 per month from my pension."</li>
            <li><strong>Detailed:</strong> "My monthly income is $3,500 from my pension, and I also have rental income of $800 per month from my property."</li>
            <li><strong>Professional:</strong> "My total monthly income is $4,200, which includes my pension of $3,200 and rental income of $1,000 from my investment property."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Be honest about your income and bring salary slips as proof.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 2.5: The Emergency Shield</h3>
    <p><strong>How will you manage expenses if something unexpected happens?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I have emergency savings and a credit card for unexpected expenses."</li>
            <li><strong>Detailed:</strong> "I have $2,000 in emergency funds and a credit card with $5,000 limit for any unexpected costs during my trip."</li>
            <li><strong>Professional:</strong> "I have allocated $3,000 in emergency funds, a credit card with $8,000 limit, and travel insurance to cover any unexpected expenses."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Mention emergency funds, credit cards, or family support.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 2.6: The Alliance Scroll</h3>
    <p><strong>Are you funding anyone else's trip (such as your spouse)?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "No, I am paying for my own trip only."</li>
            <li><strong>Detailed:</strong> "No, I am funding only my own expenses. My spouse will pay for their own trip separately."</li>
            <li><strong>Professional:</strong> "I am self-sponsored and will cover only my personal expenses. Any family members traveling with me will fund their own costs independently."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Be clear about who is paying for what.
    </div>
</div>

<div class="section-divider"></div>

<div style="background: linear-gradient(135deg, #556B2F 0%, #6B8E23 100%); color: white; padding: 20px; border-radius: 15px; margin: 20px 0; border: 3px solid #FFD700; box-shadow: 0 8px 25px rgba(85, 107, 47, 0.3);">
    <h2 style="margin: 0; text-align: center; font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">🏰 Chapter 3: The Homeland Fortress</h2>
    <p style="text-align: center; margin: 10px 0; font-size: 1.2em; color: #FFD700;">⚔️ Quest: Master the Art of Homeland Loyalty ⚔️</p>
    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px;">
        <span style="font-size: 2em;">🏠</span>
        <span style="font-size: 2em;">⚔️</span>
        <span style="font-size: 2em;">🛡️</span>
        <span style="font-size: 2em;">🏆</span>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 3.1: The Homeland Scroll</h3>
    <p><strong>What do you do in your home country?</strong></p>
    
    <div style="text-align: center; margin: 15px 0;">
        <span style="font-size: 3em;">🏢</span>
        <p style="margin: 5px 0; font-size: 0.9em; color: #666;">Strong ties = Must return</p>
    </div>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I am retired and manage my investments and property."</li>
            <li><strong>Detailed:</strong> "I am retired from government service and now manage my rental properties and investments in my home country."</li>
            <li><strong>Professional:</strong> "I am a retired government employee with ongoing business interests and property management responsibilities in my home country."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>🎯 Strategy:</strong> Emphasize ongoing responsibilities and commitments.
    </div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px;">
        <strong>🔗 Strong Ties Visual:</strong>
        <div style="display: flex; justify-content: space-around; margin-top: 10px;">
            <div style="text-align: center;">
                <span style="font-size: 2em;">💼</span>
                <p style="font-size: 0.8em; margin: 5px 0;">Job</p>
            </div>
            <div style="text-align: center;">
                <span style="font-size: 2em;">🏠</span>
                <p style="font-size: 0.8em; margin: 5px 0;">Home</p>
            </div>
            <div style="text-align: center;">
                <span style="font-size: 2em;">👨‍👩‍👧‍👦</span>
                <p style="font-size: 0.8em; margin: 5px 0;">Family</p>
            </div>
            <div style="text-align: center;">
                <span style="font-size: 2em;">🌱</span>
                <p style="font-size: 0.8em; margin: 5px 0;">Future</p>
            </div>
        </div>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 3.2: The Treasure Chest</h3>
    <p><strong>What assets or property do you own in your home country?</strong></p>
    
    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 10px;">
        <strong>List your assets:</strong><br>
        <div style="margin: 8px 0;">
            <input type="text" placeholder="Asset 1 (e.g., House, Car, Business)" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <input type="text" placeholder="Asset 2 (e.g., Savings Account, Investments)" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <input type="text" placeholder="Asset 3 (e.g., Property, Land)" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <input type="text" placeholder="Asset 4 (e.g., Pension, Insurance)" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
    </div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I own a house, a car, and have savings in the bank."</li>
            <li><strong>Detailed:</strong> "I own a 3-bedroom house worth $200,000, a car worth $15,000, and have $50,000 in savings and investments."</li>
            <li><strong>Professional:</strong> "My assets include a residential property valued at $250,000, investment portfolio of $75,000, vehicle worth $18,000, and emergency savings of $25,000."</li>
        </ol>
    </div>
    

</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 3.3: The Guardian Scroll</h3>
    <p><strong>Who will take care of your responsibilities while you're away?</strong></p>
    
    <p><em>Your plan:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "My son will take care of my house and my neighbor will check on things."</li>
            <li><strong>Detailed:</strong> "My son will manage my property maintenance, my neighbor will collect mail, and my friend will check on my investments."</li>
            <li><strong>Professional:</strong> "I have arranged for my son to oversee property management, a trusted neighbor for mail collection, and my financial advisor to monitor my investments during my absence."</li>
        </ol>
    </div>
    
    <div class="checklist">
        <strong>💪 Strong Ties Checklist:</strong><br>
        <input type="checkbox"> Job/business to return to<br>
        <input type="checkbox"> Property that needs maintenance<br>
        <input type="checkbox"> Family members depending on you<br>
        <input type="checkbox"> Community roles/commitments
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">👨‍👩‍👧‍👦</span>Question 3.4</h3>
    <p><strong>Are you married? What does your spouse do?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Mention spouse's job and how it ties you to home country.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 3.5: The Children Scroll</h3>
    <p><strong>How many children do you have? What do they do? Where do they live?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 10px;">
        <strong>📝 Family Information:</strong><br>
        <div style="margin: 8px 0;">
            <label>Child 1:</label>
            <input type="text" placeholder="Name, age, job, location" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <label>Child 2:</label>
            <input type="text" placeholder="Name, age, job, location" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <label>Child 3:</label>
            <input type="text" placeholder="Name, age, job, location" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
    </div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I have 2 children. One works in our home country and one works in the U.S."</li>
            <li><strong>Detailed:</strong> "I have 2 children. My daughter is a doctor working in our home country, and my son is a software engineer working in the U.S."</li>
            <li><strong>Professional:</strong> "I have 2 children. My daughter is a senior physician at a major hospital in our home country, and my son is a senior software engineer at a technology company in California."</li>
        </ol>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 3.6: The Household Scroll</h3>
    <p><strong>Do you live with anyone in your country? What are their jobs?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "I live with my spouse who works as a teacher."</li>
            <li><strong>Detailed:</strong> "I live with my spouse who is a government employee, and my daughter who is a doctor."</li>
            <li><strong>Professional:</strong> "I live with my spouse who is a senior government official, and my daughter who is a physician at the local hospital."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> This shows strong family ties to your home country.
    </div>
</div>

<div class="section-divider"></div>

<div style="background: linear-gradient(135deg, #8B0000 0%, #B22222 100%); color: white; padding: 20px; border-radius: 15px; margin: 20px 0; border: 3px solid #FFD700; box-shadow: 0 8px 25px rgba(139, 0, 0, 0.3);">
    <h2 style="margin: 0; text-align: center; font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">🏰 Chapter 4: The Family Alliance</h2>
    <p style="text-align: center; margin: 10px 0; font-size: 1.2em; color: #FFD700;">⚔️ Quest: Master the Art of Family Connection ⚔️</p>
    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px;">
        <span style="font-size: 2em;">👨‍👩‍👧‍👦</span>
        <span style="font-size: 2em;">⚔️</span>
        <span style="font-size: 2em;">🛡️</span>
        <span style="font-size: 2em;">🏆</span>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 4.1: The Son's Scroll</h3>
    <p><strong>What does your son do in the United States?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "My son works as a software engineer in California."</li>
            <li><strong>Detailed:</strong> "My son is a senior software engineer at Google in San Francisco, California."</li>
            <li><strong>Professional:</strong> "My son is employed as a senior software engineer at Google, working in their San Francisco office on artificial intelligence projects."</li>
        </ol>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 4.2: The Visa Scroll</h3>
    <p><strong>What visa does your son hold and where does he work?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background-color: #e8f4fd; padding: 15px; border-radius: 10px;">
        <strong>💡 Key Information to Remember:</strong><br>
        <div style="margin: 8px 0;">
            <label>Son's visa type:</label>
            <input type="text" placeholder="e.g., H1B, L1, etc." style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <label>Company name:</label>
            <input type="text" placeholder="e.g., Google, Microsoft, etc." style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <label>Job title:</label>
            <input type="text" placeholder="e.g., Software Engineer, Manager" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <label>City/state:</label>
            <input type="text" placeholder="e.g., San Francisco, CA" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 8px 0;">
            <label>How long in U.S.:</label>
            <input type="text" placeholder="e.g., 3 years, since 2020" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 4.3: The Lodging Scroll</h3>
    <p><strong>Will you be staying with your son during your visit?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div class="warning-box">
        <strong>⚠️ Important:</strong> Be consistent with your DS-160 application!
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 4.4: The Future Scroll</h3>
    <p><strong>What are your son's future plans in the U.S.?</strong></p>
    
    <p><em>Your careful response:</em></p>
    <div class="answer-space"></div>
    
    <div style="background-color: #ffebee; border-left: 4px solid #f44336; padding: 10px;">
        <strong>🚫 Avoid saying:</strong> "He wants to get a green card for us" or implying immigration intent.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 4.5: The Communication Scroll</h3>
    <p><strong>How often do you communicate with your son?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Be honest about communication frequency (weekly calls, etc.).
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 4.6: The Address Scroll</h3>
    <p><strong>Where does your son live? Can you provide his address?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background-color: #e8f4fd; padding: 15px; border-radius: 10px;">
        <strong>📝 Son's Address:</strong><br>
        <input type="text" placeholder="Street address" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin: 5px 0;">
        <input type="text" placeholder="City, State, ZIP" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin: 5px 0;">
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 4.7: The Family Scroll</h3>
    <p><strong>Is your son married? Does he have children?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Mention if he has a family - this shows he's settled in the U.S.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 4.8: The University Scroll</h3>
    <p><strong>Which University did your son study at?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Know the university name and what he studied.
    </div>
</div>

<div class="section-divider"></div>

<div style="background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%); color: white; padding: 20px; border-radius: 15px; margin: 20px 0; border: 3px solid #FFD700; box-shadow: 0 8px 25px rgba(139, 69, 19, 0.3);">
    <h2 style="margin: 0; text-align: center; font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">🏰 Chapter 5: The History Chronicles</h2>
    <p style="text-align: center; margin: 10px 0; font-size: 1.2em; color: #FFD700;">⚔️ Quest: Master the Art of Honest Disclosure ⚔️</p>
    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px;">
        <span style="font-size: 2em;">📜</span>
        <span style="font-size: 2em;">⚔️</span>
        <span style="font-size: 2em;">🛡️</span>
        <span style="font-size: 2em;">🏆</span>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 5.1: The Travel Scroll</h3>
    <p><strong>Have you traveled outside your country before?</strong></p>
    
    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 10px;">
        <strong>List your travel history:</strong><br>
        <div style="margin: 10px 0;">
            <input type="text" placeholder="Country 1" style="width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin-right: 10px;">
            <input type="text" placeholder="Year" style="width: 100px; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 10px 0;">
            <input type="text" placeholder="Country 2" style="width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin-right: 10px;">
            <input type="text" placeholder="Year" style="width: 100px; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div style="margin: 10px 0;">
            <input type="text" placeholder="Country 3" style="width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin-right: 10px;">
            <input type="text" placeholder="Year" style="width: 100px; padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
    </div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "Yes, I have visited Singapore and Thailand for tourism."</li>
            <li><strong>Detailed:</strong> "Yes, I have traveled to Singapore in 2019 and Thailand in 2021 for family vacations."</li>
            <li><strong>Professional:</strong> "Yes, I have international travel experience including Singapore in 2019 for tourism and Thailand in 2021 for a family vacation, both trips were for tourism purposes."</li>
        </ol>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 5.2: The Denial Scroll</h3>
    <p><strong>Have you ever been denied a visa?</strong></p>
    
    <p><em>Your honest answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "No, I have never been denied a visa."</li>
            <li><strong>Detailed:</strong> "No, I have never been denied a visa. This is my first time applying for a U.S. visa."</li>
            <li><strong>Professional:</strong> "No, I have never been denied a visa by any country. This is my first application for a U.S. visa."</li>
        </ol>
    </div>
    
    <div style="background-color: #fff3e0; border-left: 4px solid #ff9800; padding: 15px;">
        <strong>💡 Golden Rule:</strong> Always tell the truth. Lying will result in permanent visa ban.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 5.3: The Time Scroll</h3>
    <p><strong>Have you visited the U.S. before? If so, when and for how long?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "No, I have never visited the U.S. before."</li>
            <li><strong>Detailed:</strong> "No, this will be my first visit to the United States."</li>
            <li><strong>Professional:</strong> "No, I have never visited the United States before. This will be my first trip to the U.S."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> If yes, mention you returned on time and followed all rules.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 5.4: The Overstay Scroll</h3>
    <p><strong>Have you ever overstayed a visa anywhere?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "No, I have never overstayed a visa."</li>
            <li><strong>Detailed:</strong> "No, I have never overstayed a visa in any country."</li>
            <li><strong>Professional:</strong> "No, I have never overstayed a visa in any country. I have always complied with visa terms and conditions."</li>
        </ol>
    </div>
    
    <div class="warning-box">
        <strong>⚠️ Important:</strong> Be completely honest about any overstays.
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 5.5: The Refusal Scroll</h3>
    <p><strong>Have you ever been refused a visa by any country before?</strong></p>
    
    <p><em>Your answer:</em></p>
    <div class="answer-space"></div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid #4caf50;">
        <strong>💡 Sample Answers:</strong>
        <ol style="margin: 10px 0; padding-left: 20px;">
            <li><strong>Simple:</strong> "No, I have never been refused a visa by any country."</li>
            <li><strong>Detailed:</strong> "No, I have never been refused a visa by any country, including the U.S."</li>
            <li><strong>Professional:</strong> "No, I have never been refused a visa by any country. This is my first visa application to the United States."</li>
        </ol>
    </div>
    
    <div class="tip-box">
        <strong>💡 Tip:</strong> Include all countries, not just the U.S.
    </div>
</div>

<div class="section-divider"></div>

<div style="background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%); color: white; padding: 20px; border-radius: 15px; margin: 20px 0; border: 3px solid #FFD700; box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);">
    <h2 style="margin: 0; text-align: center; font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">🏰 Chapter 6: The Final Battle Preparation</h2>
    <p style="text-align: center; margin: 10px 0; font-size: 1.2em; color: #ffffff;">⚔️ Quest: Master the Art of Ultimate Preparation ⚔️</p>
    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px;">
        <span style="font-size: 2em;">⚔️</span>
        <span style="font-size: 2em;">🛡️</span>
        <span style="font-size: 2em;">🗡️</span>
        <span style="font-size: 2em;">🏆</span>
    </div>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 6.1: The Mock Battle</h3>
    <p><strong>Practice with a family member - time yourself (2-3 minutes per answer):</strong></p>
    
    <div style="background-color: #f8f9fa; padding: 20px; border-radius: 10px;">
        <div style="margin-bottom: 20px;">
            <strong>Practice Date 1:</strong><br>
            <input type="date" style="width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin: 5px 0;"><br>
            <strong>Areas to improve:</strong><br>
            <textarea placeholder="What went well? What needs work?" style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin: 5px 0; resize: vertical;"></textarea>
        </div>
        
        <div style="margin-bottom: 20px;">
            <strong>Practice Date 2:</strong><br>
            <input type="date" style="width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin: 5px 0;"><br>
            <strong>Areas to improve:</strong><br>
            <textarea placeholder="What went well? What needs work?" style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin: 5px 0; resize: vertical;"></textarea>
        </div>
        
        <div style="margin-bottom: 20px;">
            <strong>Practice Date 3:</strong><br>
            <input type="date" style="width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin: 5px 0;"><br>
            <strong>Ready for interview:</strong><br>
            <textarea placeholder="Final assessment - are you ready?" style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; margin: 5px 0; resize: vertical;"></textarea>
        </div>
    </div>
</div>

<div class="checklist">
    <h3><span class="emoji-icon">⚔️</span>Quest 6.2: The Equipment Checklist</h3>
    <p><strong>Day before interview - check all items:</strong></p>
    
    <input type="checkbox"> Passport (valid for 6+ months)<br>
    <input type="checkbox"> DS-160 confirmation page<br>
    <input type="checkbox"> Interview appointment letter<br>
    <input type="checkbox"> Bank statements (original + copies)<br>
    <input type="checkbox"> Employment/pension documents<br>
    <input type="checkbox"> Property ownership papers<br>
    <input type="checkbox"> Invitation letter from son (optional)<br>
    <input type="checkbox"> Travel itinerary<br>
    <input type="checkbox"> Photographs (if required)<br>
    <input type="checkbox"> Marriage certificate<br>
    <input type="checkbox"> Birth certificates of children
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 6.3: The Emergency Scroll</h3>
    <p><strong>If you don't understand a question:</strong></p>
    <ul>
        <li>"Could you please repeat the question?"</li>
        <li>"I need a moment to think about that."</li>
        <li>"Let me clarify what you're asking."</li>
    </ul>
</div>

<div class="question-box">
    <h3><span class="emoji-icon">⚔️</span>Quest 6.4: The Confidence Scroll</h3>
    <p><strong>Write your confidence-building statements:</strong></p>
    
    <div style="text-align: center; margin: 15px 0;">
        <span style="font-size: 3em;">🌟</span>
        <p style="margin: 5px 0; font-size: 0.9em; color: #666;">Repeat these daily for confidence!</p>
    </div>
    
    <div style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); padding: 20px; border-radius: 15px; margin: 15px 0; border-left: 5px solid #ff9800;">
        <h4 style="margin: 0 0 15px 0; color: #e65100;">🎯 Your Confidence Statements:</h4>
        
        <div style="margin-bottom: 15px;">
            <label style="font-weight: bold; color: #e65100;">1. I am confident because:</label>
            <div class="answer-space" style="margin-top: 8px;"></div>
        </div>
        
        <div style="margin-bottom: 15px;">
            <label style="font-weight: bold; color: #e65100;">2. I will succeed because:</label>
            <div class="answer-space" style="margin-top: 8px;"></div>
        </div>
        
        <div style="margin-bottom: 15px;">
            <label style="font-weight: bold; color: #e65100;">3. My strongest point is:</label>
            <div class="answer-space" style="margin-top: 8px;"></div>
        </div>
    </div>
    
    <div class="tip-box">
        <strong>💡 Examples:</strong>
        <ul style="margin: 10px 0; padding-left: 20px;">
            <li>"I have strong ties to my home country and will definitely return after my visit."</li>
            <li>"I am financially independent and can afford this trip myself."</li>
            <li>"I have a stable job and family responsibilities that require my return."</li>
        </ul>
    </div>
    
    <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 5px solid #4caf50;">
        <strong>🎯 Daily Practice:</strong>
        <div style="display: flex; justify-content: space-around; margin-top: 10px;">
            <span style="font-size: 1.5em;">🌅</span>
            <span style="font-size: 1.5em;">📝</span>
            <span style="font-size: 1.5em;">🗣️</span>
            <span style="font-size: 1.5em;">💪</span>
        </div>
        <p style="text-align: center; margin-top: 10px; font-size: 0.9em; color: #2e7d32;">Read these statements aloud every morning!</p>
    </div>
</div>

<div class="checklist">
    <h3><span class="emoji-icon">⚔️</span>Quest 6.5: The Battle Day Strategy</h3>
    <p><strong>Morning of interview:</strong></p>
    
    <input type="checkbox"> Good breakfast<br>
    <input type="checkbox"> Arrive 30 minutes early<br>
    <input type="checkbox"> Review this workbook one final time<br>
    <input type="checkbox"> Stay calm and confident<br>
    <input type="checkbox"> Remember: short, honest answers are best
</div>

<div class="section-divider"></div>

<div style="background: linear-gradient(135deg, #9C27B0 0%, #673AB7 100%); color: white; padding: 20px; border-radius: 15px; margin: 20px 0; border: 3px solid #FFD700; box-shadow: 0 8px 25px rgba(156, 39, 176, 0.3);">
    <h2 style="margin: 0; text-align: center; font-size: 2em; text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);">🏰 Chapter 7: The Ultimate Boss Battle</h2>
    <p style="text-align: center; margin: 10px 0; font-size: 1.2em; color: #FFD700;">⚔️ Quest: Test your preparation with 4 random questions! ⚔️</p>
    <div style="display: flex; justify-content: center; gap: 15px; margin-top: 15px;">
        <span style="font-size: 2em;">🎯</span>
        <span style="font-size: 2em;">⚔️</span>
        <span style="font-size: 2em;">🛡️</span>
        <span style="font-size: 2em;">🏆</span>
    </div>
</div>

<div style="background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); padding: 30px; border-radius: 20px; margin: 30px 0; color: white; position: relative; overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.1);">
    <div id="quiz-container">
        <div id="quiz-intro" style="text-align: center;">
            <h3 style="color: #92832e; margin: 0 0 20px 0; font-size: 2em; text-shadow: 2px 2px 1px rgb(255, 255, 255);">⚔️ Ready for Your Boss Battle?</h3>
            <p style="font-size: 1.2em; margin-bottom: 30px; color: #FFD700; text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">I'll ask you 4 random interview questions.<br>Try to answer each one out loud, brave warrior!</p>
            
            <div style="display: flex; justify-content: center; gap: 20px; margin: 20px 0;">
                <span style="font-size: 3em;">🎯</span>
                <span style="font-size: 3em;">🎪</span>
                <span style="font-size: 3em;">🎊</span>
                <span style="font-size: 3em;">🏆</span>
            </div>
            
            <button onclick="startQuiz()" style="background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 15px 30px; border-radius: 25px; font-size: 1.2em; font-weight: bold; cursor: pointer; transition: all 0.3s ease;">
                ⚔️ Start Boss Battle
            </button>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 15px;">
                <h4 style="color: #000000de; margin: 0 0 10px 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">⚔️ Battle Rules:</h4>
                <ul style="text-align: left; color: #FFD700; margin: 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">
                    <li>4 random questions from your quest</li>
                    <li>30 seconds thinking time per question</li>
                    <li>Speak your answer out loud</li>
                    <li>Rate yourself honestly</li>
                </ul>
            </div>
        </div>
        
        <div id="quiz-active" style="display: none;">
            <div style="text-align: center; margin-bottom: 20px;">
                <h3 id="quiz-progress" style="color: white; margin: 0;">Question 1 of 4</h3>
                <div style="width: 100%; height: 8px; background: rgba(255,255,255,0.3); border-radius: 10px; margin: 10px 0;">
                    <div id="quiz-progress-bar" style="height: 100%; background: #ffd700; width: 25%; transition: width 0.5s ease; border-radius: 10px;"></div>
                </div>
            </div>
            
            <div id="quiz-question-container" style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 15px; margin: 20px 0;">
                <h4 id="quiz-question" style="color: white; font-size: 1.3em; margin: 0 0 15px 0;"></h4>
                <div id="quiz-timer" style="text-align: center; margin: 20px 0;">
                    <div style="font-size: 2em; color: #ffd700; font-weight: bold;" id="timer-display">30</div>
                    <div style="color: white;">Think about your answer...</div>
                </div>
            </div>
            
            <div id="quiz-controls" style="text-align: center; margin: 20px 0;">
                <button id="quiz-ready-btn" onclick="readyToAnswer()" style="background: #28a745; color: white; border: none; padding: 12px 25px; border-radius: 25px; font-size: 1em; font-weight: bold; cursor: pointer; margin: 0 10px;">
                    ✋ I'm Ready to Answer
                </button>
            </div>
            
            <div id="quiz-answer-section" style="display: none;">
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin: 20px 0;">
                    <h4 style="color: white; margin: 0 0 15px 0;">🎤 Now speak your answer out loud!</h4>
                    <div style="text-align: center; margin: 20px 0;">
                        <button onclick="startQuizRecording()" id="quiz-record-btn" style="background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 25px; font-size: 1.1em; font-weight: bold; cursor: pointer;">
                            🎤 Start Recording Answer
                        </button>
                    </div>
                </div>
                
                <div id="quiz-rating-section" style="display: none;">
                    <h4 style="color: white; text-align: center; margin: 20px 0;">🎯 How confident are you with your answer?</h4>
                    <p style="color: white; text-align: center; margin: 10px 0; font-size: 0.9em;">Be honest with yourself - this helps track your progress!</p>
                    <div style="display: flex; justify-content: center; gap: 15px; margin: 20px 0; flex-wrap: wrap;">
                        <button onclick="rateAnswer(1)" class="quiz-rating-btn" style="background: #e74c3c; color: white; border: none; padding: 10px 20px; border-radius: 15px; cursor: pointer; transition: all 0.2s ease;">😰 Need Work</button>
                        <button onclick="rateAnswer(2)" class="quiz-rating-btn" style="background: #f39c12; color: white; border: none; padding: 10px 20px; border-radius: 15px; cursor: pointer; transition: all 0.2s ease;">😐 Okay</button>
                        <button onclick="rateAnswer(3)" class="quiz-rating-btn" style="background: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 15px; cursor: pointer; transition: all 0.2s ease;">😊 Good</button>
                        <button onclick="rateAnswer(4)" class="quiz-rating-btn" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 15px; cursor: pointer; transition: all 0.2s ease;">🌟 Excellent</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="quiz-results" style="display: none; text-align: center;">
            <h3 style="color: white; margin: 0 0 20px 0; font-size: 2em;">🎉 Quiz Complete!</h3>
            <div id="quiz-score" style="font-size: 1.5em; margin: 20px 0; color: #ffd700;"></div>
            <div id="quiz-feedback" style="margin: 20px 0; font-size: 1.1em;"></div>
            
            <div style="margin: 30px 0;">
                <button onclick="startQuiz()" style="background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 12px 25px; border-radius: 25px; font-size: 1em; cursor: pointer; margin: 0 10px;">
                    🔄 Take Another Quiz
                </button>
                <button onclick="resetQuiz()" style="background: rgba(255,255,255,0.1); color: white; border: 2px solid rgba(255,255,255,0.5); padding: 12px 25px; border-radius: 25px; font-size: 1em; cursor: pointer; margin: 0 10px;">
                    🏠 Back to Intro
                </button>
            </div>
        </div>
    </div>
</div>

    <div style="text-align: center; background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%); padding: 30px; border-radius: 20px; margin: 40px 0; color: white; position: relative; overflow: hidden; box-shadow: 0 15px 35px rgba(139, 69, 19, 0.3); border: 3px solid #FFD700;">
    <div style="position: absolute; top: -20px; left: -20px; font-size: 4em; opacity: 0.1;">⚔️</div>
    <div style="position: absolute; top: -20px; right: -20px; font-size: 4em; opacity: 0.1;">🏆</div>
    <div style="position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%); font-size: 4em; opacity: 0.1;">🗡️</div>
    
    <h2 style="color: white; margin: 0; font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">🏰 Final Battle Preparation</h2>
    <p style="font-size: 20px; margin: 15px 0;">The Interview Boss wants to approve you if you meet the requirements.<br>Be honest, be prepared, and stay confident, brave warrior!</p>
    
    <div style="display: flex; justify-content: space-around; margin: 20px 0;">
        <span style="font-size: 3em;">⚔️</span>
        <span style="font-size: 3em;">🛡️</span>
        <span style="font-size: 3em;">🗡️</span>
        <span style="font-size: 3em;">🏆</span>
    </div>
    
    <p style="font-size: 28px; font-weight: bold; color: #FFD700; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Good luck with your visa quest, brave adventurer!</p>
    <p style="font-size: 24px; color: #FFD700; margin-top: 10px;">⚔️ 頑張って！ (Ganbatte!) ⚔️</p>
    
    <div style="margin-top: 20px;">
        <button class="interactive-button" onclick="window.print()" style="background: rgba(255,255,255,0.2); border: 2px solid white;">
            🗺️ Print Your Quest Map
        </button>
    </div>
</div>

<div style="text-align: center; margin-top: 40px; padding: 20px; border-top: 2px solid #e9ecef;">
    <p style="color: #666; font-size: 0.9em; margin: 0;">
        <span style="font-weight: bold; color: #ffffff;">Immortal Gtx </span>
    </p>
</div>

</div>

<script>
        


// Add magic sparkles to quest elements
function addMagicSparkles() {
    const questElements = document.querySelectorAll('h2, h3');
    questElements.forEach(element => {
        for (let i = 0; i < 3; i++) {
            const sparkle = document.createElement('div');
            sparkle.className = 'magic-sparkle';
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.top = Math.random() * 100 + '%';
            sparkle.style.animationDelay = Math.random() * 2 + 's';
            element.style.position = 'relative';
            element.appendChild(sparkle);
        }
    });
}

    // Sand particle system
    function createSandParticle() {
        const particle = document.createElement('div');
        particle.className = 'sand-particle';
        
        // Random starting position (bottom-left to top-right diagonal)
        const startY = Math.random() * window.innerHeight;
        particle.style.left = '-50px';
        particle.style.top = startY + 'px';
        
        // Random animation duration (8-15 seconds)
        const duration = 8 + Math.random() * 7;
        particle.style.animationDuration = duration + 's';
        
        // Random delay (0-3 seconds)
        const delay = Math.random() * 3;
        particle.style.animationDelay = delay + 's';
        
        // Random size variation (2-4px)
        const size = 2 + Math.random() * 2;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';
        
        // Random opacity (0.6-1.0)
        const opacity = 0.6 + Math.random() * 0.4;
        particle.style.background = `rgba(255, 255, 255, ${opacity})`;
        
        document.body.appendChild(particle);
        
        // Remove particle after animation
        setTimeout(() => {
            if (particle.parentNode) {
                particle.remove();
            }
        }, (duration + delay) * 1000);
    }
    
    // Create particles periodically
    function startSandParticles() {
        // Create initial particles
        for (let i = 0; i < 100; i++) {
            setTimeout(() => createSandParticle(), i * 50);
        }
        
        // Continue creating particles every 0.5-1.5 seconds
        setInterval(() => {
            createSandParticle();
        }, 500 + Math.random() * 1000);
    }
    
    // Start the sand particle system when page loads
    window.addEventListener('load', startSandParticles);

// ... existing code ...
</script>

</body>
</html>
